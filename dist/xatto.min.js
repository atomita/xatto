!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var m="children",h="key",y="name",b="props",g="xa.context",x="xa.extra",c="xa.fill",f="xa.slice",l="xa.text",k="element",w="lifecycle",j="prev."+b,s=function(){return(s=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},A="create",O="destroy",E="remove",N="removing",P="update";function S(e,n,r,t){for(void 0===t&&(t=".");;){if("object"!=typeof e)return!1;var i=n.indexOf(t);if(i<0)return e[n]=r,!0;var u=n.slice(0,i),o=n.slice(i+1);if(null==e[u]){var a=o.split(t,1)[0];e[u]=a===""+parseInt(a,10)?[]:{}}e=e[u],n=o}}function L(e){var n=s({},e);return n.i=0,n[w]=A,n[m]=e[m].map(function(e){return L(e)}),S(n,j,{}),n}var v="xa-txt";function R(e,n,r,t){void 0===r&&(r={}),void 0===t&&(t=[]);var i={};return i[y]=n,i[b]=r,i[m]=t,i[h]=r.key,e&&"function"!=typeof n&&(i[y]=v,S(i[b],l,n)),i}function T(e,n,r){for(void 0===r&&(r=".");;){if(null==e)return e;var t=n.indexOf(r);if(t<0)return e[n];e=e[n.slice(0,t)],n=n.slice(t+1)}}var B=function(e){return b+".on"+e};var p="http://www.w3.org/1999/xlink";function d(e,n,r,t,i,u,o){if("key"===n||"object"==typeof r);else if("o"===n[0]&&"n"===n[1]){var a=n.slice(2);null==r?e.removeEventListener(a,u):null==t&&e.addEventListener(a,u)}else{var c=null==r||!1===r;if(n in e&&"list"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!i)c?e.removeAttribute(n):e[n]=null==r?"":r;else{var f=!1;if(i){var l=n;f=(n=n.replace(/^xlink:?/,""))!==l}switch((c?1:0)+((f?1:0)<<1)){case 0:e.setAttribute(n,r);break;case 1:e.removeAttribute(n);break;case 2:e.setAttributeNS(p,n,r);break;case 3:e.removeAttributeNS(p,n)}}}}function C(i,u){return function(){for(var e,n,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e=i,n=u.concat(r),e.apply(null,n)}}function I(t,e,i,u,o,a){var r;i||"svg"!==e[y]||(i=!0),a||e[w]!==O||(a=!0);var n=e[m].reduce(function(e,n){var r=t(n,i,u,o,a);return r?e.concat(r):e},[]);switch(a?O:e[w]){case A:r=function(e,n,r,t){var i=e[b]||{};if(e[y]===v)return document.createTextNode(T(i,l));var u=(n=n||"svg"===e[y])?document.createElementNS("http://www.w3.org/2000/svg",e[y]):document.createElement(e[y]);for(var o in i)d(u,o,i[o],null,n,r);return t.set(u,i),u}(e,i,u,o);break;case P:r=function(e,n,r,t){var i=e[k],u=e[b];if(e[y]===v)return i.nodeValue=T(u,l),i;var o=T(e,j)||{};for(var a in u)u[a]!==("value"===a||"checked"===a?i[a]:o[a])&&d(i,a,u[a],o[a],n,r);return t.set(i,u),i}(e,i,u,o);break;case O:return e[w]===O&&(r=e[k]).parentElement.removeChild(r),null;case E:e[w]=N;default:r=e[k]}return n.map(function(e){return e.element}).reduceRight(function(e,n){return r.insertBefore(n,e),n},null),e[m]=n,e[k]=r,e}function M(e,n,r,t,i,u,o,a){var c;switch(a?O:t[w]){case A:c=T(t,B(A));break;case P:c=T(t,B(P));break;case E:var f=T(t,B(E)),l=function(){t[w]=O,Promise.resolve().then(n)};c=function(e,n,r){f(e,l,n,r)};break;case O:c=T(t,B(O))}return c&&e.push(function(){c(t[k],t[b],T(t,j))}),r(t,i,u,o,a)}function V(e,n,r){return S(e,g,n||T(e,g)||{}),S(e,x,r||T(e,x)||{}),e}function W(e){return null!=e&&"object"==typeof e&&b in e&&m in e&&h in e&&y in e&&4===Object.keys(e).length}function q(e,n){for(var r=[],t=2;t<arguments.length;t++)r[t-2]=arguments[t];for(var i=[];r.length;){var u=r.pop();u&&Array.isArray(u)?r=r.concat(u):null!=u&&!0!==u&&!1!==u&&i.unshift(W(u)&&u||R(!0,u))}return R(!1,e,n||{},i)}function z(e,r){return e.reduce(function(e,n){return e.push.apply(e,D(n,r)),e},[])}function D(e,n){if(!e)return[];if(q===e.name)return z(e[m],n);var r=e[b],t=T(r,g)||n&&T(n,b+"."+g)||{},i=T(r,f);if(i){var u=T(t,i);if(!u){var o=T(r,c)||{};S(t,i,u=s({},o))}t=u}var a=V(r,t,s({},T(r,x)||{},n&&T(n,b+"."+x)||{}));return("function"==typeof e.name?D(e.name(a,e[m]),e):[e]).reduce(function(e,n){return W(n)&&(n[m]=z(n[m],n),e.push(n)),e},[])}e.atto=function(u,e){var n,r,i=!1,o=e instanceof Element?((r=L(R(!1,(n=e).nodeName)))[k]=n,r):e,a=V(o[b]),c=T(a,g),f=new WeakMap;function l(e,n,r){if(void 0===e&&(e=null),void 0===n&&(n=c),void 0===r&&(r=null),e&&e!==n){if("function"==typeof e)return e(l,n,c);if(e instanceof Promise)return e.then(function(e){return l(e,n,r)});if("object"==typeof e){null==r&&"string"==typeof n&&(r=n,n=c);var t=r?T(n,r)||{}:n;Object.entries(e).map(function(e){var n=e[0],r=e[1];return t[n]=r}),r&&S(n,r,t)}}i||(i=!0,Promise.resolve().then(v).then(p,d))}function s(e){var n=e.currentTarget,r=f.get(n),t=T(r,g),i=T(r,x);l(r["on"+e.type](e,t,i),t)}function v(){var n,r,e=function i(e,n){if(!n)return L(e);if(!e)return S(n,j,n[b]),n[w]=n[w]===N||n[w]===O?n[w]:T(n,B(E))?E:O,n;S(n,j,n[b]),n[b]=e[b],n[h]=e[h],n[y]=e[y],n[w]=P;var u=n[m].map(function(e,n){return e.i=n,e}),o=e[m].map(function(e){var n,r,t;for(t=0;t<u.length;t++)if(r=u[t],e[y]==r[y]&&e[h]==r[h]&&(P===r[w]||A===r[w])){n=r;break}return n?(u.splice(t,1),i(e,n)):i(e)});return u.reduceRight(function(e,n){if(0===(n=i(void 0,n)).i)o.unshift(n);else{var r=n.i-1,t=void 0;for(t=0;t<o.length;t++)if(r===o[t].i)return o.splice(t+1,0,n),0;o.push(n)}return 0},0),n[m]=o,n}(D(q(u,a,o[m]))[0],o),t=[[function(e){return C(I,[e])}],(n=l,r=[],[function(e){return C(M,[r,n,e])},function(){return r.reduce(function(e,n){return n()},0)}])],i=t.map(function(e){return e[0]}).reduce(function(e,n){return n(e)},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.apply(null,e)});o=i(e,"svg"===e.name,s,f,!1),t.map(function(e){return e[1]&&e[1]()})}function p(){i=!1}function d(e){throw p(),e}return l},e.x=q});
//# sourceMappingURL=dist/xatto.min.js.map
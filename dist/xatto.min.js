!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.xatto={})}(this,function(e){"use strict";var d="attributes",p="children",x="key",m="name",h="xa.context",b="xa.extra",y="xa.slice",a="xa.text",g="xa-context",k="xa-extra",w="xa-slice";function j(e,t,n){for(void 0===n&&(n=".");;){if(null==e)return e;var r=t.indexOf(n);if(r<0)return e[t];e=e[t.slice(0,r)],t=t.slice(r+1)}}function A(e,t,n,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var i=t.indexOf(r);if(i<0)return e[t]=n,!0;var o=t.slice(0,i),u=t.slice(i+1);if(null==e[o]){var a=u.split(r,1)[0];e[o]=a===""+parseInt(a,10)?[]:{}}e=e[o],t=u}}var O="create",E="destroy",N="remove",P="removing",S="update",L="element",R="lifecycle",T="prev."+d,c="xa-txt",f="http://www.w3.org/1999/xlink";function l(e,t,n,r,i,o){if("key"===t||"object"==typeof n);else if("o"===t[0]&&"n"===t[1])e.events||(e.events={}),null==(e.events[t=t.slice(2)]=n)?e.removeEventListener(t,o):null==r&&e.addEventListener(t,o);else{var u=null==n||!1===n;if(t in e&&"list"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!i)u?e.removeAttribute(t):e[t]=null==n?"":n;else{var a=!1;if(i){var c=t;a=(t=t.replace(/^xlink:?/,""))!==c}switch((u?1:0)+((a?1:0)<<1)){case 0:e.setAttribute(t,n);break;case 1:e.removeAttribute(t);break;case 2:e.setAttributeNS(f,t,n);break;case 3:e.removeAttributeNS(f,t)}}}}function B(u){return function(e,r,i,o){var n;r||"svg"!==e[m]||(r=!0),o||e[R]!==E||(o=!0);var t=e[p].reduce(function(e,t){var n=u(t,r,i,o);return n?e.concat(n):e},[]);switch(o?E:e[R]){case O:n=function(e,t,n){var r=e[d]||{};if(e[m]===c)return document.createTextNode(j(r,a));var i=(t=t||"svg"===e[m])?document.createElementNS("http://www.w3.org/2000/svg",e[m]):document.createElement(e[m]);for(var o in r)l(i,o,r[o],null,t,n);return i.context=j(r,h)||r[h]||{},i.extra=j(r,b)||r[b]||{},i}(e,r,i);break;case S:n=function(e,t,n){var r=e[L],i=e[d];if(e[m]===c)return r.nodeValue=j(i,a),r;var o=j(e,T)||{};for(var u in i)i[u]!==("value"===u||"checked"===u?r[u]:o[u])&&l(r,u,i[u],o[u],t,n);return r.context=j(i,h)||i[g]||{},r.extra=j(i,b)||i[k]||{},r}(e,r,i);break;case E:return e[R]===E&&(n=e[L]).parentElement.removeChild(n),null;case N:e[R]=P;default:n=e[L]}return t.map(function(e){return e.element}).reduceRight(function(e,t){return n.insertBefore(t,e),t},null),e[p]=t,e[L]=n,e}}var C=function(e){return d+".on"+e};var I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function V(e){return null!=e&&"object"==typeof e&&d in e&&p in e&&x in e&&m in e&&4===Object.keys(e).length}function u(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r=[]);var i={};return i[m]=t,i[d]=n,i[p]=r,i[x]=n.key,e&&"function"!=typeof t&&(i[m]=c,A(i[d],a,t)),i}function q(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i=[];n.length;){var o=n.pop();o&&Array.isArray(o)?n=n.concat(o):null!=o&&!0!==o&&!1!==o&&i.unshift(V(o)&&o||u(!0,o))}return u(!1,e,t||{},i)}e.atto=function(r,e){var i=!1,o=e instanceof Element?{name:e.nodeName,attributes:{},children:[],element:e}:e,u=o[d],a=j(u,h)||u[g]||{};function c(e,t,n){if(void 0===e&&(e=null),void 0===t&&(t=a),void 0===n&&(n=null),e&&e!==t){if("function"==typeof e)return e(c,t,a);if(e instanceof Promise)return e.then(function(e){return c(e,t,n)});if("object"==typeof e){null==n&&"string"==typeof t&&(n=t,t=a);var r=n?j(t,n)||{}:t;Object.entries(e).map(function(e){var t=e[0],n=e[1];return r[t]=n}),n&&A(t,n,r)}}i||(i=!0,Promise.resolve().then(f).then(l,s))}function v(e){var t=e.currentTarget;t.context=t.context||{},t.extra=t.extra||{},c(t.events[e.type](e,t.context,t.extra),t.context)}function f(){var f,l,e=[],t=function i(e,t){var n;if(!t)return(n=I({},e))[R]=O,n[p]=e[p].map(function(e){return i(e,null)}),A(n,T,{}),n;if(!e)return A(t,T,t[d]),t[R]=t[R]===P||t[R]===E?t[R]:j(t,C(N))?N:E,t;A(t,T,t[d]),t[d]=e[d],t[x]=e[x],t[m]=e[m],t[R]=S;var o=t[p].map(function(e,t){return e.i=t,e}),u=e[p].map(function(e){var t,n,r;for(r=0;r<o.length;r++)if(n=o[r],e[m]==n[m]&&e[x]==n[x]&&(S===n[R]||O===n[R])){t=n;break}return t?(o.splice(r,1),i(e,t)):i(e,null)});return o.reduceRight(function(e,t){if(0===(t=i(null,t)).i)u.unshift(t);else{var n=t.i-1,r=void 0;for(r=0;r<u.length;r++)if(n===u[r].i)return void u.splice(r+1,0,t);u.push(t)}},0),t[p]=u,t}(function r(e,t){var n=e&&e[d];if(n){var i=j(n,h)||n[g]||t&&(j(t,d+"."+h)||j(t,d+"."+g))||{},o=j(n,y)||n[w],u=void 0;"object"!=typeof o&&(o=[o]);var a=o[0];if(a){if(!(u=j(i,a))){var c=o[1]||{};A(i,a,u=I({},c))}i=u}var f=I({},j(n,b)||n[k]||{},t&&(j(t,d+"."+b)||j(t,d+"."+k))||{});A(n,h,i),A(n,b,f),A(n,y,[]),n[g]=i,n[k]=f}var l=e&&"function"==typeof e.name?r(e.name(e[d],e[p]),e):e;return V(l)?(l[p]=l[p].reduce(function(e,t){var n=r(t,l);return n&&e.push(n),e},[]),l):null}(q(r,u,o&&o[p]),q("div",{},[])),o),n=[(f=e,l=c,function(c){return function(e,t,n,r){void 0===r&&(r=!1);var i,o=r?E:e[R];switch(e=c(e,t,n,r),o){case O:i=j(e,C(O));break;case S:i=j(e,C(S));break;case N:var u=j(e,C(N)),a=function(){e[R]=E,Promise.resolve().then(l)};i=function(e,t,n){u(e,a,t,n)};break;case E:i=j(e,C(E))}return i&&f.push(function(){i(e[L],e[d],j(e,T))}),e}})].reduce(function(e,t){return t(e)},B(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.apply(null,e)}));o=n(t,"svg"===t.name,v,!1),e.reduce(function(e,t){return t()},0)}function l(){i=!1}function s(e){throw l(),e}return A(u,h,a),u[g]=a,c},e.x=q});
//# sourceMappingURL=dist/xatto.min.js.map
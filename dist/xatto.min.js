!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var d="children",h="key",m="name",b="props",y="xa.context",g="xa.extra",l="xa.slice",c="xa.text",x="element",k="lifecycle",w="prev."+b,v=function(){return(v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},j="create",A="destroy",O="remove",E="removing",N="update";function P(e,n,t,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var i=n.indexOf(r);if(i<0)return e[n]=t,!0;var u=n.slice(0,i),o=n.slice(i+1);if(null==e[u]){var a=o.split(r,1)[0];e[u]=a===""+parseInt(a,10)?[]:{}}e=e[u],n=o}}function S(e){var n=v({},e);return n.i=0,n[k]=j,n[d]=e[d].map(function(e){return S(e)}),P(n,w,{}),n}var f="xa-txt";function L(e,n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var i={};return i[m]=n,i[b]=t,i[d]=r,i[h]=t.key,e&&"function"!=typeof n&&(i[m]=f,P(i[b],c,n)),i}function R(e,n,t){for(void 0===t&&(t=".");;){if(null==e)return e;var r=n.indexOf(t);if(r<0)return e[n];e=e[n.slice(0,r)],n=n.slice(r+1)}}var T=function(e){return b+".on"+e};var s="http://www.w3.org/1999/xlink";function p(e,n,t,r,i,u,o){if("key"===n||"object"==typeof t);else if("o"===n[0]&&"n"===n[1]){var a=n.slice(2);null==t?e.removeEventListener(a,u):null==r&&e.addEventListener(a,u)}else{var c=null==t||!1===t;if(n in e&&"list"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!i)c?e.removeAttribute(n):e[n]=null==t?"":t;else{var f=!1;if(i){var l=n;f=(n=n.replace(/^xlink:?/,""))!==l}switch((c?1:0)+((f?1:0)<<1)){case 0:e.setAttribute(n,t);break;case 1:e.removeAttribute(n);break;case 2:e.setAttributeNS(s,n,t);break;case 3:e.removeAttributeNS(s,n)}}}}function B(a){return function(e,r,i,u,o){var t;r||"svg"!==e[m]||(r=!0),o||e[k]!==A||(o=!0);var n=e[d].reduce(function(e,n){var t=a(n,r,i,u,o);return t?e.concat(t):e},[]);switch(o?A:e[k]){case j:t=function(e,n,t,r){var i=e[b]||{};if(e[m]===f)return document.createTextNode(R(i,c));var u=(n=n||"svg"===e[m])?document.createElementNS("http://www.w3.org/2000/svg",e[m]):document.createElement(e[m]);for(var o in i)p(u,o,i[o],null,n,t);return r.set(u,i),u}(e,r,i,u);break;case N:t=function(e,n,t,r){var i=e[x],u=e[b];if(e[m]===f)return i.nodeValue=R(u,c),i;var o=R(e,w)||{};for(var a in u)u[a]!==("value"===a||"checked"===a?i[a]:o[a])&&p(i,a,u[a],o[a],n,t);return r.set(i,u),i}(e,r,i,u);break;case A:return e[k]===A&&(t=e[x]).parentElement.removeChild(t),null;case O:e[k]=E;default:t=e[x]}return n.map(function(e){return e.element}).reduceRight(function(e,n){return t.insertBefore(n,e),n},null),e[d]=n,e[x]=t,e}}function C(e,n,t,r){return P(e,y,n||R(e,y)||{}),P(e,g,t||R(e,g)||{}),P(e,l,r||R(e,l)||[]),e}function I(e){return null!=e&&"object"==typeof e&&b in e&&d in e&&h in e&&m in e&&4===Object.keys(e).length}function M(e,n){var t,r=e[b],i=R(r,y)||n&&R(n,b+"."+y)||{},u=R(r,l);"object"!=typeof u&&(u=[u]);var o=u[0];if(o){if(!(t=R(i,o))){var a=u[1]||{};P(i,o,t=v({},a))}i=t}var c=C(r,i,v({},R(r,g)||{},n&&R(n,b+"."+g)||{}),[]),f=e&&"function"==typeof e.name?M(e.name(c,e[d]),e):e;if(I(f))return f[d]=f[d].reduce(function(e,n){var t=M(n,f);return t&&e.push(t),e},[]),f}function V(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var i=[];t.length;){var u=t.pop();u&&Array.isArray(u)?t=t.concat(u):null!=u&&!0!==u&&!1!==u&&i.unshift(I(u)&&u||L(!0,u))}return L(!1,e,n||{},i)}e.atto=function(r,e){var n,t,i=!1,u=e instanceof Element?((t=S(L(!1,(n=e).nodeName)))[x]=n,t):e,o=C(u[b]),a=R(o,y),c=new WeakMap;function v(e,n,t){if(void 0===e&&(e=null),void 0===n&&(n=a),void 0===t&&(t=null),e&&e!==n){if("function"==typeof e)return e(v,n,a);if(e instanceof Promise)return e.then(function(e){return v(e,n,t)});if("object"==typeof e){null==t&&"string"==typeof n&&(t=n,n=a);var r=t?R(n,t)||{}:n;Object.entries(e).map(function(e){var n=e[0],t=e[1];return r[n]=t}),t&&P(n,t,r)}}i||(i=!0,Promise.resolve().then(f).then(l,p))}function s(e){var n=e.currentTarget,t=c.get(n),r=R(t,y),i=R(t,g);v(t["on"+e.type](e,r,i),r)}function f(){var f,l,e=[],n=function i(e,n){if(!n)return S(e);if(!e)return P(n,w,n[b]),n[k]=n[k]===E||n[k]===A?n[k]:R(n,T(O))?O:A,n;P(n,w,n[b]),n[b]=e[b],n[h]=e[h],n[m]=e[m],n[k]=N;var u=n[d].map(function(e,n){return e.i=n,e}),o=e[d].map(function(e){var n,t,r;for(r=0;r<u.length;r++)if(t=u[r],e[m]==t[m]&&e[h]==t[h]&&(N===t[k]||j===t[k])){n=t;break}return n?(u.splice(r,1),i(e,n)):i(e)});return u.reduceRight(function(e,n){if(0===(n=i(void 0,n)).i)o.unshift(n);else{var t=n.i-1,r=void 0;for(r=0;r<o.length;r++)if(t===o[r].i)return o.splice(r+1,0,n),0;o.push(n)}return 0},0),n[d]=o,n}(M(V(r,o,u[d]))||M(V("div",{},[])),u),t=[(f=e,l=v,function(c){return function(e,n,t,r,i){var u;switch(void 0===i&&(i=!1),i?A:e[k]){case j:u=R(e,T(j));break;case N:u=R(e,T(N));break;case O:var o=R(e,T(O)),a=function(){e[k]=A,Promise.resolve().then(l)};u=function(e,n,t){o(e,a,n,t)};break;case A:u=R(e,T(A))}return u&&f.push(function(){u(e[x],e[b],R(e,w))}),c(e,n,t,r,i)}})].reduce(function(e,n){return n(e)},B(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(null,e)}));u=t(n,"svg"===n.name,s,c,!1),e.reduce(function(e,n){return n()},0)}function l(){i=!1}function p(e){throw l(),e}return v},e.x=V});
//# sourceMappingURL=dist/xatto.min.js.map
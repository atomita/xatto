!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var j="attributes",O="children",f="key",k="name",w="xa-context",N="xa-extra",A="xa-recycle",u="xa-slice",E="xa-text";function d(e,n,t){for(void 0===t&&(t=".");;){if(null==e)return e;var r=n.indexOf(t);if(r<0)return e[n];e=e[n.slice(0,r)],n=n.slice(r+1)}}function p(e,n,t,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var o=n.indexOf(r);if(o<0)return e[n]=t,!0;var i=n.slice(0,o),a=n.slice(o+1);if(null==e[i]){var f=a.split(r,1)[0];e[i]=f===""+parseInt(f,10)?[]:{}}e=e[i],n=a}}var P="xa-txt",B=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e};function C(e,n){var t=e&&e[j];if(t){var r=t[w]||n&&n[j]&&n[j][w]||{},o=t[u],i=void 0;"object"!=typeof o&&(o=[o]);var a=o[0];if(a){if(!(i=d(r,a))){var f=o[1]||{};p(r,a,i=B({},f))}r=i}var l=B({},t[N]||{},n&&n[j]&&n[j][N]||{});t[w]=r,t[N]=l}return e&&"function"==typeof e.name?C(e.name(e[j],e[O]),e):null!=e?e:""}function L(e,n,t,r,o,i){"key"===n||"object"==typeof t||("o"===n[0]&&"n"===n[1]?(e.events||(e.events={}),(e.events[n=n.slice(2)]=t)?r||e.addEventListener(n,i):e.removeEventListener(n,i)):n in e&&"list"!==n&&!o?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n))}function T(e){return e?e.key:null}function V(e,n,t){function r(){e.removeChild(function e(n,t){var r=t[j];if(r){for(var o=0;o<t[O].length;o++)e(n.childNodes[o],t[O][o]);r.ondestroy&&r.ondestroy(n,r,r[w],r[N])}return n}(n,t))}var o=t[j]||{},i=o.onremove;i?i(n,r,o,o[w],o[N]):r()}function I(e,n,t,r,o,i,a){if(void 0===i&&(i=!1),r===t);else if(null==t||t.name!==r.name){var f=function e(n,t,r,o){var i=n[k]===P,a=i?document.createTextNode(n[j][E]):(r=r||"svg"===n[k])?document.createElementNS("http://www.w3.org/2000/svg",n[k]):document.createElement(n[k]),f=n[j];if(f){var l=f.oncreate;if(l&&t.push(function(){l(a,{},f[w],f[N])}),i)a.nodeValue=n[j][E];else{for(var u=0;u<n[O].length;u++)a.appendChild(e(n[O][u]=C(n[O][u],n),t,r,o));for(var c in f)L(a,c,f[c],null,r,o)}a.context=f[w],a.extra=f[N]}return a}(r,o,i,a);e.insertBefore(f,n),null!=t&&V(e,n,t),n=f}else if(t.name===P)n.nodeValue=r[j][E];else{!function(e,n,t,r,o,i){var a=B({},n,t);for(var f in a)t[f]!==("value"===f||"checked"===f?e[f]:n[f])&&L(e,f,t[f],n[f],o,i);e.context=t[w],e.extra=t[N];var l=t[A]?t.oncreate:t.onupdate;l&&r.push(function(){l(e,n,t[w],t[N])})}(n,t[j],r[j],o,i=i||"svg"===r.name,a);for(var l={},u={},c=[],v=t[O],s=r[O],d=0;d<v.length;d++){c[d]=n.childNodes[d],null!=(h=T(v[d]))&&(l[h]=[c[d],v[d]])}for(var p=0,x=0;x<s.length;){var h=T(v[p]),y=T(s[x]=C(s[x],r));if(u[h])p++;else if(null==y||y!==T(v[p+1])){var m=(s[x][j]||{})[A];if(null==y||!0===m)null==h&&(I(n,c[p],v[p],s[x],o,i,a),x++),p++;else{var g=l[y]||[];h===y?(I(n,g[0],g[1],s[x],o,i,a),p++):g[0]?I(n,n.insertBefore(g[0],c[p]),g[1],s[x],o,i,a):I(n,c[p],null,s[x],o,i,a),u[y]=s[x],x++}}else null==h&&V(n,c[p],v[p]),p++}for(;p<v.length;)null==T(v[p])&&V(n,c[p],v[p]),p++;for(var b in l)u[b]||V(n,l[b][0],l[b][1])}return n}function l(e,n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var o={};return o[k]=n,o[j]=t,o[O]=r,o[f]=t.key,e&&"function"!=typeof n&&(o[k]=P,o[j][E]=n),o}function x(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var o,i=[];t.length;){var a=t.pop();a&&Array.isArray(a)?t=t.concat(a):null!=a&&!0!==a&&!1!==a&&i.unshift("object"==typeof(o=a)&&j in o&&O in o&&f in o&&k in o&&4===Object.keys(o).length&&a||l(!0,a))}return l(!1,e,n||{},i)}e.atto=function(t,r,o){void 0===o&&(o=null);var i=!1,a=o&&o[j]||{},f=a[w]={};function l(e,n,t){if(void 0===n&&(n=f),void 0===t&&(t=null),e&&e!==n)if(e instanceof Promise)e.then(function(e){return l(e,n,t)});else if("object"==typeof e){null==t&&"string"==typeof n&&(t=n,n=f);var r=t?d(n,t)||{}:n;Object.entries(e).map(function(e){var n=e[0],t=e[1];return r[n]=t}),t&&p(n,t,r)}i||(i=!0,Promise.resolve().then(c).then(v,s))}function u(e){var n=e.currentTarget;n.context=n.context||{},n.extra=n.extra||{},l(n.events[e.type](e,n.context,n.extra),n.context)}function c(){var e=[],n=C(x(t,a,o&&o[O]),x("div",{},[]));for(r=I(r.parentNode,r,o,o=n,e,"svg"===n.name,u),a[A]=!1;e.length;)e.pop()()}function v(){i=!1}function s(e){throw v(),e}return l},e.x=x});
//# sourceMappingURL=dist/xatto.min.js.map
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var N="attributes",w="children";function f(t){return t.getAttributeNames().reduce(function(e,n){return e[n]=t.getAttribute(n),e},{})}var j="xa-context",A="xa-extra",k="xa-recycle",E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e};function O(e,n){var t=e&&e[N];if(t){var r=t[j]||n&&n[N]&&n[N][j]||{},o=E({},t[A]||{},n&&n[N]&&n[N][A]||{});t[j]=r,t[A]=o}return e&&"function"==typeof e.name?O(e.name(e[N],e[w]),e):null!=e?e:""}function C(e,n,t,r,o,u){"key"===n||"object"==typeof t||("o"===n[0]&&"n"===n[1]?(e.events||(e.events={}),(e.events[n=n.slice(2)]=t)?r||e.addEventListener(n,u):e.removeEventListener(n,u)):n in e&&"list"!==n&&!o?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n))}function L(e){return e?e.key:null}function P(e,n,t){function r(){e.removeChild(function e(n,t){var r=t[N];if(r){for(var o=0;o<t[w].length;o++)e(n.childNodes[o],t[w][o]);r.ondestroy&&r.ondestroy(n,r,r[j],r[A])}return n}(n,t))}var o=t[N]||{},u=o.onremove;u?u(n,r,o,o[j],o[A]):r()}function T(e,n,t,r,o,u,a){if(void 0===u&&(u=!1),r===t);else if(null==t||t.name!==r.name){var i=function e(n,t,r,o){var u="string"==typeof n||"number"==typeof n?document.createTextNode(n):(r=r||"svg"===n.name)?document.createElementNS("http://www.w3.org/2000/svg",n.name):document.createElement(n.name),a=n[N];if(a){var i=a.oncreate;i&&t.push(function(){i(u,{},a[j],a[A])});for(var c=0;c<n[w].length;c++)u.appendChild(e(n[w][c]=O(n[w][c],n),t,r,o));for(var l in a)C(u,l,a[l],null,r,o);u.context=a[j],u.extra=a[A]}return u}(r,o,u,a);e.insertBefore(i,n),null!=t&&P(e,n,t),n=i}else if(null==t.name)n.nodeValue=r;else{!function(e,n,t,r,o,u){var a=E({},n,t);for(var i in a)t[i]!==("value"===i||"checked"===i?e[i]:n[i])&&C(e,i,t[i],n[i],o,u);e.context=t[j],e.extra=t[A];var c=t[k]?t.oncreate:t.onupdate;c&&r.push(function(){c(e,n,t[j],t[A])})}(n,t[N],r[N],o,u=u||"svg"===r.name,a);for(var c={},l={},f=[],s=t[w],v=r[w],d=0;d<s.length;d++){f[d]=n.childNodes[d],null!=(h=L(s[d]))&&(c[h]=[f[d],s[d]])}for(var m=0,p=0;p<v.length;){var h=L(s[m]),y=L(v[p]=O(v[p],r));if(l[h])m++;else if(null==y||y!==L(s[m+1])){var g=(v[p][N]||{})[k];if(null==y||!0===g)null==h&&(T(n,f[m],s[m],v[p],o,u,a),p++),m++;else{var x=c[y]||[];h===y?(T(n,x[0],x[1],v[p],o,u,a),m++):x[0]?T(n,n.insertBefore(x[0],f[m]),x[1],v[p],o,u,a):T(n,f[m],null,v[p],o,u,a),l[y]=v[p],p++}}else null==h&&P(n,f[m],s[m]),m++}for(;m<s.length;)null==L(s[m])&&P(n,f[m],s[m]),m++;for(var b in c)l[b]||P(n,c[b][0],c[b][1])}return n}var s=[].map;function v(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var o=[];t.length;){var u=t.pop();u&&Array.isArray(u)?t=t.concat(u):null!=u&&!0!==u&&!1!==u&&o.unshift(u)}return{name:e,attributes:n||{},children:o,key:n&&n.key}}e.atto=function(t,r){var o=function n(e){var t=f(e);return t[k]=!0,{nodeName:e.nodeName.toLowerCase(),attributes:t,children:s.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:n(e)})}}(r),e=!1,u=f(r);function a(e){var r=e.currentTarget;!function e(n){n&&n!==r.context&&(n instanceof Promise?n.then(e):"function"==typeof n.subscribe?n.subscribe(e):"object"==typeof n&&(Object.entries(n).map(function(e){var n=e[0],t=e[1];return r.context[n]=t}),l()))}(r.events[e.type](e,r.context||{},r.extra||{}))}function n(){var e=[],n=O(v(t,u,o[w]),v("div",{},[]));for(r=T(r.parentNode,r,o,o=n,e,"svg"===n.name,a);e.length;)e.pop()()}function i(){e=!1}function c(e){throw i(),e}function l(){e||(e=!0,Promise.resolve().then(n).then(i,c))}return l},e.x=v});
//# sourceMappingURL=dist/xatto.min.js.map
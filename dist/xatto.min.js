!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var p="children",d="key",x="name",m="props",h="xa.context",b="xa.extra",y="xa.slice",a="xa.text",g="xa-context",k="xa-extra",w="xa-slice";function j(e,n,t){for(void 0===t&&(t=".");;){if(null==e)return e;var r=n.indexOf(t);if(r<0)return e[n];e=e[n.slice(0,r)],n=n.slice(r+1)}}function A(e,n,t,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var i=n.indexOf(r);if(i<0)return e[n]=t,!0;var o=n.slice(0,i),u=n.slice(i+1);if(null==e[o]){var a=u.split(r,1)[0];e[o]=a===""+parseInt(a,10)?[]:{}}e=e[o],n=u}}var O="create",E="destroy",N="remove",P="removing",S="update",L="element",R="lifecycle",T="prev."+m,c="xa-txt",f="http://www.w3.org/1999/xlink";function l(e,n,t,r,i,o){if("key"===n||"object"==typeof t);else if("o"===n[0]&&"n"===n[1])e.events||(e.events={}),null==(e.events[n=n.slice(2)]=t)?e.removeEventListener(n,o):null==r&&e.addEventListener(n,o);else{var u=null==t||!1===t;if(n in e&&"list"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!i)u?e.removeAttribute(n):e[n]=null==t?"":t;else{var a=!1;if(i){var c=n;a=(n=n.replace(/^xlink:?/,""))!==c}switch((u?1:0)+((a?1:0)<<1)){case 0:e.setAttribute(n,t);break;case 1:e.removeAttribute(n);break;case 2:e.setAttributeNS(f,n,t);break;case 3:e.removeAttributeNS(f,n)}}}}function B(u){return function(e,r,i,o){var t;r||"svg"!==e[x]||(r=!0),o||e[R]!==E||(o=!0);var n=e[p].reduce(function(e,n){var t=u(n,r,i,o);return t?e.concat(t):e},[]);switch(o?E:e[R]){case O:t=function(e,n,t){var r=e[m]||{};if(e[x]===c)return document.createTextNode(j(r,a));var i=(n=n||"svg"===e[x])?document.createElementNS("http://www.w3.org/2000/svg",e[x]):document.createElement(e[x]);for(var o in r)l(i,o,r[o],null,n,t);return i.context=j(r,h)||r[h]||{},i.extra=j(r,b)||r[b]||{},i}(e,r,i);break;case S:t=function(e,n,t){var r=e[L],i=e[m];if(e[x]===c)return r.nodeValue=j(i,a),r;var o=j(e,T)||{};for(var u in i)i[u]!==("value"===u||"checked"===u?r[u]:o[u])&&l(r,u,i[u],o[u],n,t);return r.context=j(i,h)||i[g]||{},r.extra=j(i,b)||i[k]||{},r}(e,r,i);break;case E:return e[R]===E&&(t=e[L]).parentElement.removeChild(t),null;case N:e[R]=P;default:t=e[L]}return n.map(function(e){return e.element}).reduceRight(function(e,n){return t.insertBefore(n,e),n},null),e[p]=n,e[L]=t,e}}var C=function(e){return m+".on"+e};var I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};function V(e){return null!=e&&"object"==typeof e&&m in e&&p in e&&d in e&&x in e&&4===Object.keys(e).length}function u(e,n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var i={};return i[x]=n,i[m]=t,i[p]=r,i[d]=t.key,e&&"function"!=typeof n&&(i[x]=c,A(i[m],a,n)),i}function q(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var i=[];t.length;){var o=t.pop();o&&Array.isArray(o)?t=t.concat(o):null!=o&&!0!==o&&!1!==o&&i.unshift(V(o)&&o||u(!0,o))}return u(!1,e,n||{},i)}e.atto=function(r,e){var i=!1,o=e instanceof Element?{name:e.nodeName,props:{},children:[],element:e}:e,u=o[m],a=j(u,h)||u[g]||{};function c(e,n,t){if(void 0===e&&(e=null),void 0===n&&(n=a),void 0===t&&(t=null),e&&e!==n){if("function"==typeof e)return e(c,n,a);if(e instanceof Promise)return e.then(function(e){return c(e,n,t)});if("object"==typeof e){null==t&&"string"==typeof n&&(t=n,n=a);var r=t?j(n,t)||{}:n;Object.entries(e).map(function(e){var n=e[0],t=e[1];return r[n]=t}),t&&A(n,t,r)}}i||(i=!0,Promise.resolve().then(f).then(l,s))}function v(e){var n=e.currentTarget;n.context=n.context||{},n.extra=n.extra||{},c(n.events[e.type](e,n.context,n.extra),n.context)}function f(){var f,l,e=[],n=function i(e,n){var t;if(!n)return(t=I({},e))[R]=O,t[p]=e[p].map(function(e){return i(e,null)}),A(t,T,{}),t;if(!e)return A(n,T,n[m]),n[R]=n[R]===P||n[R]===E?n[R]:j(n,C(N))?N:E,n;A(n,T,n[m]),n[m]=e[m],n[d]=e[d],n[x]=e[x],n[R]=S;var o=n[p].map(function(e,n){return e.i=n,e}),u=e[p].map(function(e){var n,t,r;for(r=0;r<o.length;r++)if(t=o[r],e[x]==t[x]&&e[d]==t[d]&&(S===t[R]||O===t[R])){n=t;break}return n?(o.splice(r,1),i(e,n)):i(e,null)});return o.reduceRight(function(e,n){if(0===(n=i(null,n)).i)u.unshift(n);else{var t=n.i-1,r=void 0;for(r=0;r<u.length;r++)if(t===u[r].i)return void u.splice(r+1,0,n);u.push(n)}},0),n[p]=u,n}(function r(e,n){var t=e&&e[m];if(t){var i=j(t,h)||t[g]||n&&(j(n,m+"."+h)||j(n,m+"."+g))||{},o=j(t,y)||t[w],u=void 0;"object"!=typeof o&&(o=[o]);var a=o[0];if(a){if(!(u=j(i,a))){var c=o[1]||{};A(i,a,u=I({},c))}i=u}var f=I({},j(t,b)||t[k]||{},n&&(j(n,m+"."+b)||j(n,m+"."+k))||{});A(t,h,i),A(t,b,f),A(t,y,[]),t[g]=i,t[k]=f}var l=e&&"function"==typeof e.name?r(e.name(e[m],e[p]),e):e;return V(l)?(l[p]=l[p].reduce(function(e,n){var t=r(n,l);return t&&e.push(t),e},[]),l):null}(q(r,u,o&&o[p]),q("div",{},[])),o),t=[(f=e,l=c,function(c){return function(e,n,t,r){void 0===r&&(r=!1);var i,o=r?E:e[R];switch(e=c(e,n,t,r),o){case O:i=j(e,C(O));break;case S:i=j(e,C(S));break;case N:var u=j(e,C(N)),a=function(){e[R]=E,Promise.resolve().then(l)};i=function(e,n,t){u(e,a,n,t)};break;case E:i=j(e,C(E))}return i&&f.push(function(){i(e[L],e[m],j(e,T))}),e}})].reduce(function(e,n){return n(e)},B(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(null,e)}));o=t(n,"svg"===n.name,v,!1),e.reduce(function(e,n){return n()},0)}function l(){i=!1}function s(e){throw l(),e}return A(u,h,a),u[g]=a,c},e.x=q});
//# sourceMappingURL=dist/xatto.min.js.map
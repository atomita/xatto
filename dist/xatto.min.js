!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var j="attributes",w="children",k="xaContext",E="xaExtra",N="xaRecycle",A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e};function O(e,n){var t=e&&e[j];if(t){var r=t[k]||n&&n[j]&&n[j][k]||{},o=A({},t[E]||{},n&&n[j]&&n[j][E]||{});t[k]=r,t[E]=o}return e&&"function"==typeof e.name?O(e.name(e[j],e[w]),e):null!=e?e:""}function C(e,n,t,r,o,i){"key"===n||"object"==typeof t||("o"===n[0]&&"n"===n[1]?(e.events||(e.events={}),(e.events[n=n.slice(2)]=t)?r||e.addEventListener(n,i):e.removeEventListener(n,i)):n in e&&"list"!==n&&!o?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n))}function P(e){return e?e.key:null}function B(e,n,t){function r(){e.removeChild(function e(n,t){var r=t[j];if(r){for(var o=0;o<t[w].length;o++)e(n.childNodes[o],t[w][o]);r.ondestroy&&r.ondestroy(n,r,r[k],r[E])}return n}(n,t))}var o=t[j]||{},i=o.onremove;i?i(n,r,o,o[k],o[E]):r()}function L(e,n,t,r,o,i,u){if(void 0===i&&(i=!1),r===t);else if(null==t||t.name!==r.name){var a=function e(n,t,r,o){var i="string"==typeof n||"number"==typeof n?document.createTextNode(n):(r=r||"svg"===n.name)?document.createElementNS("http://www.w3.org/2000/svg",n.name):document.createElement(n.name),u=n[j];if(u){var a=u.oncreate;a&&t.push(function(){a(i,{},u[k],u[E])});for(var l=0;l<n[w].length;l++)i.appendChild(e(n[w][l]=O(n[w][l],n),t,r,o));for(var f in u)C(i,f,u[f],null,r,o);i.context=u[k],i.extra=u[E]}return i}(r,o,i,u);e.insertBefore(a,n),null!=t&&B(e,n,t),n=a}else if(null==t.name)n.nodeValue=r;else{!function(e,n,t,r,o,i){var u=A({},n,t);for(var a in u)t[a]!==("value"===a||"checked"===a?e[a]:n[a])&&C(e,a,t[a],n[a],o,i);e.context=t[k],e.extra=t[E];var l=t[N]?t.oncreate:t.onupdate;l&&r.push(function(){l(e,n,t[k],t[E])})}(n,t[j],r[j],o,i=i||"svg"===r.name,u);for(var l={},f={},c=[],s=t[w],v=r[w],d=0;d<s.length;d++){c[d]=n.childNodes[d],null!=(m=P(s[d]))&&(l[m]=[c[d],s[d]])}for(var p=0,h=0;h<v.length;){var m=P(s[p]),y=P(v[h]=O(v[h],r));if(f[m])p++;else if(null==y||y!==P(s[p+1])){var x=(v[h][j]||{})[N];if(null==y||!0===x)null==m&&(L(n,c[p],s[p],v[h],o,i,u),h++),p++;else{var g=l[y]||[];m===y?(L(n,g[0],g[1],v[h],o,i,u),p++):g[0]?L(n,n.insertBefore(g[0],c[p]),g[1],v[h],o,i,u):L(n,c[p],null,v[h],o,i,u),f[y]=v[h],h++}}else null==m&&B(n,c[p],s[p]),p++}for(;p<s.length;)null==P(s[p])&&B(n,c[p],s[p]),p++;for(var b in l)f[b]||B(n,l[b][0],l[b][1])}return n}function c(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var o=[];t.length;){var i=t.pop();i&&Array.isArray(i)?t=t.concat(i):null!=i&&!0!==i&&!1!==i&&o.unshift(i)}return{name:e,attributes:n||{},children:o,key:n&&n.key}}e.atto=function(t,r,o){void 0===o&&(o=null);var e=!1,i=o&&o[j]||{};function u(e){var r=e.currentTarget;!function e(n){n&&n!==r.context&&(n instanceof Promise?n.then(e):"function"==typeof n.subscribe?n.subscribe(e):"object"==typeof n&&(Object.entries(n).map(function(e){var n=e[0],t=e[1];return r.context[n]=t}),f()))}(r.events[e.type](e,r.context||{},r.extra||{}))}function n(){var e=[],n=O(c(t,i,o&&o[w]),c("div",{},[]));for(r=L(r.parentNode,r,o,o=n,e,"svg"===n.name,u),i[N]=!1;e.length;)e.pop()()}function a(){e=!1}function l(e){throw a(),e}function f(){e||(e=!0,Promise.resolve().then(n).then(a,l))}return f},e.x=c});
//# sourceMappingURL=dist/xatto.min.js.map
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var m="children",h="key",y="name",b="props",g="xa.context",x="xa.extra",l="xa.slice",c="xa.text",k="element",w="lifecycle",j="prev."+b,v=function(){return(v=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)},A="create",O="destroy",E="remove",N="removing",P="update";function S(e,n,t,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var i=n.indexOf(r);if(i<0)return e[n]=t,!0;var u=n.slice(0,i),o=n.slice(i+1);if(null==e[u]){var a=o.split(r,1)[0];e[u]=a===""+parseInt(a,10)?[]:{}}e=e[u],n=o}}function L(e){var n=v({},e);return n.i=0,n[w]=A,n[m]=e[m].map(function(e){return L(e)}),S(n,j,{}),n}var f="xa-txt";function R(e,n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var i={};return i[y]=n,i[b]=t,i[m]=r,i[h]=t.key,e&&"function"!=typeof n&&(i[y]=f,S(i[b],c,n)),i}function T(e,n,t){for(void 0===t&&(t=".");;){if(null==e)return e;var r=n.indexOf(t);if(r<0)return e[n];e=e[n.slice(0,r)],n=n.slice(r+1)}}var B=function(e){return b+".on"+e};var s="http://www.w3.org/1999/xlink";function p(e,n,t,r,i,u,o){if("key"===n||"object"==typeof t);else if("o"===n[0]&&"n"===n[1]){var a=n.slice(2);null==t?e.removeEventListener(a,u):null==r&&e.addEventListener(a,u)}else{var c=null==t||!1===t;if(n in e&&"list"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!i)c?e.removeAttribute(n):e[n]=null==t?"":t;else{var f=!1;if(i){var l=n;f=(n=n.replace(/^xlink:?/,""))!==l}switch((c?1:0)+((f?1:0)<<1)){case 0:e.setAttribute(n,t);break;case 1:e.removeAttribute(n);break;case 2:e.setAttributeNS(s,n,t);break;case 3:e.removeAttributeNS(s,n)}}}}function C(i,u){return function(){for(var e,n,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e=i,n=u.concat(t),e.apply(null,n)}}function I(r,e,i,u,o,a){var t;i||"svg"!==e[y]||(i=!0),a||e[w]!==O||(a=!0);var n=e[m].reduce(function(e,n){var t=r(n,i,u,o,a);return t?e.concat(t):e},[]);switch(a?O:e[w]){case A:t=function(e,n,t,r){var i=e[b]||{};if(e[y]===f)return document.createTextNode(T(i,c));var u=(n=n||"svg"===e[y])?document.createElementNS("http://www.w3.org/2000/svg",e[y]):document.createElement(e[y]);for(var o in i)p(u,o,i[o],null,n,t);return r.set(u,i),u}(e,i,u,o);break;case P:t=function(e,n,t,r){var i=e[k],u=e[b];if(e[y]===f)return i.nodeValue=T(u,c),i;var o=T(e,j)||{};for(var a in u)u[a]!==("value"===a||"checked"===a?i[a]:o[a])&&p(i,a,u[a],o[a],n,t);return r.set(i,u),i}(e,i,u,o);break;case O:return e[w]===O&&(t=e[k]).parentElement.removeChild(t),null;case E:e[w]=N;default:t=e[k]}return n.map(function(e){return e.element}).reduceRight(function(e,n){return t.insertBefore(n,e),n},null),e[m]=n,e[k]=t,e}function M(e,n,t,r,i,u,o,a){var c;switch(a?O:r[w]){case A:c=T(r,B(A));break;case P:c=T(r,B(P));break;case E:var f=T(r,B(E)),l=function(){r[w]=O,Promise.resolve().then(n)};c=function(e,n,t){f(e,l,n,t)};break;case O:c=T(r,B(O))}return c&&e.push(function(){c(r[k],r[b],T(r,j))}),t(r,i,u,o,a)}function V(e,n,t,r){return S(e,g,n||T(e,g)||{}),S(e,x,t||T(e,x)||{}),S(e,l,r||T(e,l)||[]),e}function d(e){return null!=e&&"object"==typeof e&&b in e&&m in e&&h in e&&y in e&&4===Object.keys(e).length}function W(e,n){var t,r=e[b],i=T(r,g)||n&&T(n,b+"."+g)||{},u=T(r,l);"object"!=typeof u&&(u=[u]);var o=u[0];if(o){if(!(t=T(i,o))){var a=u[1]||{};S(i,o,t=v({},a))}i=t}var c=V(r,i,v({},T(r,x)||{},n&&T(n,b+"."+x)||{}),[]),f=e&&"function"==typeof e.name?W(e.name(c,e[m]),e):e;if(d(f))return f[m]=f[m].reduce(function(e,n){var t=W(n,f);return t&&e.push(t),e},[]),f}function q(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var i=[];t.length;){var u=t.pop();u&&Array.isArray(u)?t=t.concat(u):null!=u&&!0!==u&&!1!==u&&i.unshift(d(u)&&u||R(!0,u))}return R(!1,e,n||{},i)}e.atto=function(u,e){var n,t,i=!1,o=e instanceof Element?((t=L(R(!1,(n=e).nodeName)))[k]=n,t):e,a=V(o[b]),c=T(a,g),f=new WeakMap;function l(e,n,t){if(void 0===e&&(e=null),void 0===n&&(n=c),void 0===t&&(t=null),e&&e!==n){if("function"==typeof e)return e(l,n,c);if(e instanceof Promise)return e.then(function(e){return l(e,n,t)});if("object"==typeof e){null==t&&"string"==typeof n&&(t=n,n=c);var r=t?T(n,t)||{}:n;Object.entries(e).map(function(e){var n=e[0],t=e[1];return r[n]=t}),t&&S(n,t,r)}}i||(i=!0,Promise.resolve().then(s).then(p,d))}function v(e){var n=e.currentTarget,t=f.get(n),r=T(t,g),i=T(t,x);l(t["on"+e.type](e,r,i),r)}function s(){var n,t,e=function i(e,n){if(!n)return L(e);if(!e)return S(n,j,n[b]),n[w]=n[w]===N||n[w]===O?n[w]:T(n,B(E))?E:O,n;S(n,j,n[b]),n[b]=e[b],n[h]=e[h],n[y]=e[y],n[w]=P;var u=n[m].map(function(e,n){return e.i=n,e}),o=e[m].map(function(e){var n,t,r;for(r=0;r<u.length;r++)if(t=u[r],e[y]==t[y]&&e[h]==t[h]&&(P===t[w]||A===t[w])){n=t;break}return n?(u.splice(r,1),i(e,n)):i(e)});return u.reduceRight(function(e,n){if(0===(n=i(void 0,n)).i)o.unshift(n);else{var t=n.i-1,r=void 0;for(r=0;r<o.length;r++)if(t===o[r].i)return o.splice(r+1,0,n),0;o.push(n)}return 0},0),n[m]=o,n}(W(q(u,a,o[m]))||W(q("div",{},[])),o),r=[[function(e){return C(I,[e])}],(n=l,t=[],[function(e){return C(M,[t,n,e])},function(){return t.reduce(function(e,n){return n()},0)}])],i=r.map(function(e){return e[0]}).reduce(function(e,n){return n(e)},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.apply(null,e)});o=i(e,"svg"===e.name,v,f,!1),r.map(function(e){return e[1]&&e[1]()})}function p(){i=!1}function d(e){throw p(),e}return l},e.x=q});
//# sourceMappingURL=dist/xatto.min.js.map
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var N="attributes",w="children",j="xa-context",A="xa-extra",k="xa-recycle",E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e};function O(e,n){if("string"==typeof e)return e;var t=e[N][j]||n[N][j]||{},r=E({},e[N][A]||{},n[N][A]||{});return e[N][j]=t,e[N][A]=r,"function"==typeof e.name?O(e.name(e[N],e[w]),e):null!=e?e:""}function C(e,n,t,r,o,u){"key"===n||"object"==typeof t||("o"===n[0]&&"n"===n[1]?(e.events||(e.events={}),(e.events[n=n.slice(2)]=t)?r||e.addEventListener(n,u):e.removeEventListener(n,u)):n in e&&"list"!==n&&!o?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n))}function L(e){return e?e.key:null}function P(e,n,t){function r(){e.removeChild(function e(n,t){var r=t[N];if(r){for(var o=0;o<t[w].length;o++)e(n.childNodes[o],t[w][o]);r.ondestroy&&r.ondestroy(n)}return n}(n,t))}var o=t[N]&&t[N].onremove;o?o(n,r):r()}function T(e,n,t,r,o,u,i){if(void 0===u&&(u=!1),r===t);else if(null==t||t.name!==r.name){var a=function e(n,t,r,o){var u="string"==typeof n||"number"==typeof n?document.createTextNode(n):(r=r||"svg"===n.name)?document.createElementNS("http://www.w3.org/2000/svg",n.name):document.createElement(n.name),i=n[N];if(i){var a=i.oncreate;a&&t.push(function(){a(u)});for(var l=0;l<n[w].length;l++)u.appendChild(e(n[w][l]=O(n[w][l],n),t,r,o));for(var c in i)C(u,c,i[c],null,r,o);u.context=i[j],u.extra=i[A]}return u}(r,o,u,i);e.insertBefore(a,n),null!=t&&P(e,n,t),n=a}else if(null==t.name)n.nodeValue=r;else{!function(e,n,t,r,o,u){var i=E({},n,t);for(var a in i)t[a]!==("value"===a||"checked"===a?e[a]:n[a])&&C(e,a,t[a],n[a],o,u);e.context=t[j],e.extra=t[A];var l=t[k]?t.oncreate:t.onupdate;l&&r.push(function(){l(e,n)})}(n,t[N],r[N],o,u=u||"svg"===r.name,i);for(var l={},c={},f=[],s=t[w],v=r[w],d=0;d<s.length;d++){f[d]=n.childNodes[d],null!=(h=L(s[d]))&&(l[h]=[f[d],s[d]])}for(var p=0,m=0;m<v.length;){var h=L(s[p]),y=L(v[m]=O(v[m],r));if(c[h])p++;else if(null==y||y!==L(s[p+1])){var g=(v[m][N]||{})[k];if(null==y||!0===g)null==h&&(T(n,f[p],s[p],v[m],o,u,i),m++),p++;else{var x=l[y]||[];h===y?(T(n,x[0],x[1],v[m],o,u,i),p++):x[0]?T(n,n.insertBefore(x[0],f[p]),x[1],v[m],o,u,i):T(n,f[p],null,v[m],o,u,i),c[y]=v[m],m++}}else null==h&&P(n,f[p],s[p]),p++}for(;p<s.length;)null==L(s[p])&&P(n,f[p],s[p]),p++;for(var b in l)c[b]||P(n,l[b][0],l[b][1])}return n}var c=[].map;e.atto=function(n,t){var r=function n(e){var t,r=(t=e).getAttributeNames().reduce(function(e,n){return e[n]=t.getAttribute(n),e},{});return r[k]=!0,{nodeName:e.nodeName.toLowerCase(),attributes:r,children:c.call(e.childNodes,function(e){return 3===e.nodeType?e.nodeValue:n(e)})}}(t),e=!1;function o(e){var r=e.currentTarget;!function e(n){n&&n!==r.context&&(n instanceof Promise?n.then(e):"function"==typeof n.subscribe?n.subscribe(e):"object"==typeof n&&(Object.entries(n).map(function(e){var n=e[0],t=e[1];return r.context[n]=t}),l()))}(r.events[e.type](e,r.context||{},r.extra||{}))}function u(){var e=[];for(t=T(t.parentNode,t,r,r=n,e,"svg"===n.name,o);e.length;)e.pop()()}function i(){e=!1}function a(e){throw i(),e}function l(){e||(e=!0,Promise.resolve().then(u).then(i,a))}return l},e.x=function(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var o=[];t.length;){var u=t.pop();u&&Array.isArray(u)?t=t.concat(u):null!=u&&!0!==u&&!1!==u&&o.unshift(u)}return{name:e,attributes:n||{},children:o,key:n&&n.key}}});
//# sourceMappingURL=dist/xatto.min.js.map
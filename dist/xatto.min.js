!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var p="children",d="key",m="name",h="props",x="xa.context",b="xa.extra",y="xa.slice",a="xa.text";function g(e,n,t){for(void 0===t&&(t=".");;){if(null==e)return e;var r=n.indexOf(t);if(r<0)return e[n];e=e[n.slice(0,r)],n=n.slice(r+1)}}function k(e,n,t,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var i=n.indexOf(r);if(i<0)return e[n]=t,!0;var o=n.slice(0,i),u=n.slice(i+1);if(null==e[o]){var a=u.split(r,1)[0];e[o]=a===""+parseInt(a,10)?[]:{}}e=e[o],n=u}}var w="create",j="destroy",A="remove",O="removing",E="update",N="element",P="lifecycle",S="prev."+h,c="xa-txt",f="http://www.w3.org/1999/xlink";function l(e,n,t,r,i,o){if("key"===n||"object"==typeof t);else if("o"===n[0]&&"n"===n[1])e.events||(e.events={}),null==(e.events[n=n.slice(2)]=t)?e.removeEventListener(n,o):null==r&&e.addEventListener(n,o);else{var u=null==t||!1===t;if(n in e&&"list"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!i)u?e.removeAttribute(n):e[n]=null==t?"":t;else{var a=!1;if(i){var c=n;a=(n=n.replace(/^xlink:?/,""))!==c}switch((u?1:0)+((a?1:0)<<1)){case 0:e.setAttribute(n,t);break;case 1:e.removeAttribute(n);break;case 2:e.setAttributeNS(f,n,t);break;case 3:e.removeAttributeNS(f,n)}}}}function L(u){return function(e,r,i,o){var t;r||"svg"!==e[m]||(r=!0),o||e[P]!==j||(o=!0);var n=e[p].reduce(function(e,n){var t=u(n,r,i,o);return t?e.concat(t):e},[]);switch(o?j:e[P]){case w:t=function(e,n,t){var r=e[h]||{};if(e[m]===c)return document.createTextNode(g(r,a));var i=(n=n||"svg"===e[m])?document.createElementNS("http://www.w3.org/2000/svg",e[m]):document.createElement(e[m]);for(var o in r)l(i,o,r[o],null,n,t);return i.context=g(r,x)||{},i.extra=g(r,b)||{},i}(e,r,i);break;case E:t=function(e,n,t){var r=e[N],i=e[h];if(e[m]===c)return r.nodeValue=g(i,a),r;var o=g(e,S)||{};for(var u in i)i[u]!==("value"===u||"checked"===u?r[u]:o[u])&&l(r,u,i[u],o[u],n,t);return r}(e,r,i);break;case j:return e[P]===j&&(t=e[N]).parentElement.removeChild(t),null;case A:e[P]=O;default:t=e[N]}return n.map(function(e){return e.element}).reduceRight(function(e,n){return t.insertBefore(n,e),n},null),e[p]=n,e[N]=t,e}}var R=function(e){return h+".on"+e};var T=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};function B(e){return null!=e&&"object"==typeof e&&h in e&&p in e&&d in e&&m in e&&4===Object.keys(e).length}function u(e,n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var i={};return i[m]=n,i[h]=t,i[p]=r,i[d]=t.key,e&&"function"!=typeof n&&(i[m]=c,k(i[h],a,n)),i}function C(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var i=[];t.length;){var o=t.pop();o&&Array.isArray(o)?t=t.concat(o):null!=o&&!0!==o&&!1!==o&&i.unshift(B(o)&&o||u(!0,o))}return u(!1,e,n||{},i)}e.atto=function(r,e){var i=!1,o=e instanceof Element?{name:e.nodeName,props:{},children:[],element:e}:e,u=o[h],a=g(u,x)||{};function c(e,n,t){if(void 0===e&&(e=null),void 0===n&&(n=a),void 0===t&&(t=null),e&&e!==n){if("function"==typeof e)return e(c,n,a);if(e instanceof Promise)return e.then(function(e){return c(e,n,t)});if("object"==typeof e){null==t&&"string"==typeof n&&(t=n,n=a);var r=t?g(n,t)||{}:n;Object.entries(e).map(function(e){var n=e[0],t=e[1];return r[n]=t}),t&&k(n,t,r)}}i||(i=!0,Promise.resolve().then(f).then(l,s))}function v(e){var n=e.currentTarget;n.context=n.context||{},n.extra=n.extra||{},c(n.events[e.type](e,n.context,n.extra),n.context)}function f(){var f,l,e=[],n=function i(e,n){var t;if(!n)return(t=T({},e))[P]=w,t[p]=e[p].map(function(e){return i(e,null)}),k(t,S,{}),t;if(!e)return k(n,S,n[h]),n[P]=n[P]===O||n[P]===j?n[P]:g(n,R(A))?A:j,n;k(n,S,n[h]),n[h]=e[h],n[d]=e[d],n[m]=e[m],n[P]=E;var o=n[p].map(function(e,n){return e.i=n,e}),u=e[p].map(function(e){var n,t,r;for(r=0;r<o.length;r++)if(t=o[r],e[m]==t[m]&&e[d]==t[d]&&(E===t[P]||w===t[P])){n=t;break}return n?(o.splice(r,1),i(e,n)):i(e,null)});return o.reduceRight(function(e,n){if(0===(n=i(null,n)).i)u.unshift(n);else{var t=n.i-1,r=void 0;for(r=0;r<u.length;r++)if(t===u[r].i)return void u.splice(r+1,0,n);u.push(n)}},0),n[p]=u,n}(function r(e,n){var t=e&&e[h];if(t){var i=g(t,x)||n&&g(n,h+"."+x)||{},o=g(t,y),u=void 0;"object"!=typeof o&&(o=[o]);var a=o[0];if(a){if(!(u=g(i,a))){var c=o[1]||{};k(i,a,u=T({},c))}i=u}var f=T({},g(t,b)||{},n&&g(n,h+"."+b)||{});k(t,x,i),k(t,b,f),k(t,y,[])}var l=e&&"function"==typeof e.name?r(e.name(e[h],e[p]),e):e;return B(l)?(l[p]=l[p].reduce(function(e,n){var t=r(n,l);return t&&e.push(t),e},[]),l):null}(C(r,u,o&&o[p]),C("div",{},[])),o),t=[(f=e,l=c,function(c){return function(e,n,t,r){void 0===r&&(r=!1);var i,o=r?j:e[P];switch(e=c(e,n,t,r),o){case w:i=g(e,R(w));break;case E:i=g(e,R(E));break;case A:var u=g(e,R(A)),a=function(){e[P]=j,Promise.resolve().then(l)};i=function(e,n,t){u(e,a,n,t)};break;case j:i=g(e,R(j))}return i&&f.push(function(){i(e[N],e[h],g(e,S))}),e}})].reduce(function(e,n){return n(e)},L(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(null,e)}));o=t(n,"svg"===n.name,v,!1),e.reduce(function(e,n){return n()},0)}function l(){i=!1}function s(e){throw l(),e}return k(u,x,a),c},e.x=C});
//# sourceMappingURL=dist/xatto.min.js.map
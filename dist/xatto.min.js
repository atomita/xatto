!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xatto={})}(this,function(e){"use strict";var d="attributes",p="children",x="key",m="name",h="xa.context",y="xa.extra",b="xa.slice",a="xa.text",g="xa-context",k="xa-extra",j="xa-slice";function w(e,n,t){for(void 0===t&&(t=".");;){if(null==e)return e;var r=n.indexOf(t);if(r<0)return e[n];e=e[n.slice(0,r)],n=n.slice(r+1)}}function O(e,n,t,r){for(void 0===r&&(r=".");;){if("object"!=typeof e)return!1;var i=n.indexOf(r);if(i<0)return e[n]=t,!0;var o=n.slice(0,i),u=n.slice(i+1);if(null==e[o]){var a=u.split(r,1)[0];e[o]=a===""+parseInt(a,10)?[]:{}}e=e[o],n=u}}var E="create",A="destroy",P="remove",N="removing",L="update",R="element",T="lifecycle",B="prev."+d,c="xa-txt";function f(e,n,t,r,i,o){"key"===n||"object"==typeof t||("o"===n[0]&&"n"===n[1]?(e.events||(e.events={}),(e.events[n=n.slice(2)]=t)?r||e.addEventListener(n,o):e.removeEventListener(n,o)):n in e&&"list"!==n&&!i?e[n]=null==t?"":t:null!=t&&!1!==t&&e.setAttribute(n,t),null!=t&&!1!==t||e.removeAttribute(n))}function C(u){return function(e,r,i,o){var t;r||"svg"!==e[m]||(r=!0),o||e[T]!==A||(o=!0);var n=e[p].reduce(function(e,n){var t=u(n,r,i,o);return t?e.concat(t):e},[]);switch(o?A:e[T]){case E:t=function(e,n,t){var r=e[d]||{};if(e[m]===c)return document.createTextNode(w(r,a));var i=(n=n||"svg"===e[m])?document.createElementNS("http://www.w3.org/2000/svg",e[m]):document.createElement(e[m]);for(var o in r)f(i,o,r[o],null,n,t);return i.context=w(r,h)||r[h]||{},i.extra=w(r,y)||r[y]||{},i}(e,r,i);break;case L:t=function(e,n,t){var r=e[R],i=e[d];if(e[m]===c)return r.nodeValue=w(i,a),r;var o=w(e,B)||{};for(var u in i)i[u]!==("value"===u||"checked"===u?r[u]:o[u])&&f(r,u,i[u],o[u],n,t);return r.context=w(i,h)||i[g]||{},r.extra=w(i,y)||i[k]||{},r}(e,r,i);break;case A:return e[T]===A&&(t=e[R]).parentElement.removeChild(t),null;case P:e[T]=N;default:t=e[R]}return n.map(function(e){return e.element}).reduceRight(function(e,n){return t.insertBefore(n,e),n},null),e[p]=n,e[R]=t,e}}var I=function(e){return d+".on"+e};var S=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e};function V(e){return"object"==typeof e&&d in e&&p in e&&x in e&&m in e&&4===Object.keys(e).length}function u(e,n,t,r){void 0===t&&(t={}),void 0===r&&(r=[]);var i={};return i[m]=n,i[d]=t,i[p]=r,i[x]=t.key,e&&"function"!=typeof n&&(i[m]=c,O(i[d],a,n)),i}function q(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];for(var i=[];t.length;){var o=t.pop();o&&Array.isArray(o)?t=t.concat(o):null!=o&&!0!==o&&!1!==o&&i.unshift(V(o)&&o||u(!0,o))}return u(!1,e,n||{},i)}e.atto=function(r,e){var i=!1,o=e instanceof Element?{name:e.nodeName,attributes:{},children:[],element:e}:e,u=o[d],a=w(u,h)||u[g]||{};function c(e,n,t){if(void 0===n&&(n=a),void 0===t&&(t=null),e&&e!==n)if(e instanceof Promise)e.then(function(e){return c(e,n,t)});else if("object"==typeof e){null==t&&"string"==typeof n&&(t=n,n=a);var r=t?w(n,t)||{}:n;Object.entries(e).map(function(e){var n=e[0],t=e[1];return r[n]=t}),t&&O(n,t,r)}i||(i=!0,Promise.resolve().then(f).then(l,s))}function v(e){var n=e.currentTarget;n.context=n.context||{},n.extra=n.extra||{},c(n.events[e.type](e,n.context,n.extra),n.context)}function f(){var f,l,e=[],n=function i(e,n){var t;if(!n)return(t=S({},e))[T]=E,t[p]=e[p].map(function(e){return i(e,null)}),O(t,B,{}),t;if(!e)return O(n,B,n[d]),n[T]=n[T]===N||n[T]===A?n[T]:w(n,I(P))?P:A,n;O(n,B,n[d]),n[d]=e[d],n[x]=e[x],n[m]=e[m],n[T]=L;var o=n[p].map(function(e,n){return e.i=n,e}),u=e[p].map(function(e){var n,t,r;for(r=0;r<o.length;r++)if(t=o[r],e[m]==t[m]&&e[x]==t[x]){L!==t[T]&&E!==t[T]||(n=t);break}return n?(o.splice(r,1),i(e,n)):i(e,null)});return o.reduceRight(function(e,n){if(0===(n=i(null,n)).i)u.unshift(n);else{var t=n.i-1,r=void 0;for(r=0;r<u.length;r++)if(t===u[r].i)return void u.splice(r+1,0,n);u.push(n)}},0),n[p]=u,n}(function r(e,n){var t=e&&e[d];if(t){var i=w(t,h)||t[g]||n&&(w(n,d+"."+h)||w(n,d+"."+g))||{},o=w(t,b)||t[j],u=void 0;"object"!=typeof o&&(o=[o]);var a=o[0];if(a){if(!(u=w(i,a))){var c=o[1]||{};O(i,a,u=S({},c))}i=u}var f=S({},w(t,y)||t[k]||{},n&&(w(n,d+"."+y)||w(n,d+"."+k))||{});O(t,h,i),O(t,y,f),t[g]=i,t[k]=f}var l=e&&"function"==typeof e.name?r(e.name(e[d],e[p]),e):e;return V(l)?(l[p]=l[p].reduce(function(e,n){var t=r(n,l);return t&&e.push(t),e},[]),l):null}(q(r,u,o&&o[p]),q("div",{},[])),o),t=[(f=e,l=c,function(c){return function(e,n,t,r){void 0===r&&(r=!1);var i,o=r?A:e[T];switch(e=c(e,n,t,r),o){case E:i=w(e,I(E));break;case L:i=w(e,I(L));break;case P:var u=w(e,I(P)),a=function(){e[T]=A,Promise.resolve().then(l)};i=function(e,n,t){u(e,a,n,t)};break;case A:i=w(e,I(A))}return i&&f.push(function(){i(e[R],e[d],w(e,B))}),e}})].reduce(function(e,n){return n(e)},C(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(null,e)}));o=t(n,"svg"===n.name,v,!1),e.reduce(function(e,n){return n()},0)}function l(){i=!1}function s(e){throw l(),e}return O(u,h,a),u[g]=a,c},e.x=q});
//# sourceMappingURL=dist/xatto.min.js.map
{"version":3,"sources":["dist/xatto.js"],"names":["global","factory","exports","module","define","amd","xatto","this","CONTEXT","EXTRA","FILL","PATH","SLICE","TEXT","MIDDLEWARES","CHILDREN","KEY","NAME","PROPS","ELEMENT","LIFECYCLE","PREV_PROPS","PREV","CREATE","DESTROY","REMOVE","REMOVING","UPDATE","assign","target","source","key","hasOwnProperty","deepSet","value","separator","idx","indexOf","current","slice","nexts","next","split","parseInt","createGlueNode","vNode","newGlueNode","i","map","child","TEXT_NODE","createVNode","mayBeTextNode","name","props","children","node","deepGet","mutate","getContext","setContext","scheduleRender","context","path","Promise","then","newContext","targetContext","remodelProps","extra","XLINK_NS","updateAttribute","element","oldValue","isSVG","eventProxy","eventName","removeEventListener","addEventListener","nullOrFalse","removeAttribute","ns","originName","replace","setAttribute","setAttributeNS","removeAttributeNS","shouldBeCaptureLifecycles","patcher","destroys","lifecycleEvents","elementProps","elementRemoveds","recursion","glueNode","captureLifecycle","_a","rawLifecycle","Element","has","lifecycleEvent","shouldBeCaptureLifecycle","shouldBeCaptureLifecycleByCaptured","lifecycle","detail","document","createTextNode","createElementNS","createElement","name_1","set","prevProps","updated","nodeValue","updateElement","push","parentElement","removeChild","done","resolve","elm","option","event","CustomEvent","dispatchEvent","fireLifeCycleEventProvider","toLowerCase","reduce","acc","childNode","patchedChild","concat","v","reduceRight","ref","insertBefore","isVNode","x","rest","_i","arguments","length","pop","Array","isArray","unshift","resolveChildren","parentNode","childs","apply","resolverProvider","rawProps","parentProps","parentPath","sliced","resolved","resolver","rendererProvider","WeakMap","currentTarget","get","type","_","destroy","lifeCycleEventPath","rendering","view","renderers","rootProps","wrapOnion","noop","args","finallyer","mergeGlueNode","indexedPrevChildren","prevChild","_prevChild","splice","undefined","index","stack","memorize","atto","elementOrGlueNode","options","scheduled","nodeName","rootContext","middlewares","render","rendered","renderedError","rendererProviders","provider","def","e","currentOnlyEventHandler","eventHandler"],"mappings":"CAKC,SAAUA,EAAQC,GACE,iBAAZC,SAA0C,oBAAXC,OAAyBF,EAAQC,SACrD,mBAAXE,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,WAAYH,GAChEA,EAASD,EAAOM,MAAQ,IAH3B,CAIEC,KAAM,SAAWL,GAAW,aAE5B,IAAIM,EAAU,aACVC,EAAQ,WACRC,EAAO,UACPC,EAAO,UACPC,EAAQ,WACRC,EAAO,UAEPC,EAAc,cAEdC,EAAW,WACXC,EAAM,MACNC,EAAO,OACPC,EAAQ,QAERC,EAAU,UACVC,EAAY,YAEZC,EAAaC,QAAaJ,EAE1BK,EAAS,SACTC,EAAU,UACVC,EAAS,SACTC,EAAW,WACXC,EAAS,SAEb,SAASC,EAAOC,EAAQC,GACpB,IAAK,IAAIC,KAAOD,EACRA,EAAOE,eAAeD,KACtBF,EAAOE,GAAOD,EAAOC,IAG7B,OAAOF,EAYX,SAASI,EAAQJ,EAAQE,EAAKG,EAAOC,GAEjC,SADkB,IAAdA,IAAwBA,EAAY,OAC3B,CACT,GAAI,iBAAoBN,EACpB,OAAO,EAEX,IAAIO,EAAML,EAAIM,QAAQF,GACtB,GAAIC,EAAM,EAEN,OADAP,EAAOE,GAAOG,GACP,EAEX,IAAII,EAAUP,EAAIQ,MAAM,EAAGH,GACvBI,EAAQT,EAAIQ,MAAMH,EAAM,GAC5B,GAAI,MAAQP,EAAOS,GAAU,CACzB,IAAIG,EAAOD,EAAME,MAAMP,EAAW,GAAG,GACrCN,EAAOS,GAAWG,IAAS,GAAKE,SAASF,EAAM,IAAM,GAAK,GAE9DZ,EAASA,EAAOS,GAChBP,EAAMS,GAId,SAASI,EAAeC,GACpB,IAAIC,EAAclB,EAAO,GAAIiB,GAK7B,OAJAC,EAAYC,EAAI,EAChBD,EAAY1B,GAAaG,EACzBuB,EAAY/B,GAAY8B,EAAM9B,GAAUiC,IAAI,SAAUC,GAAS,OAAOL,EAAeK,KACrFhB,EAAQa,EAAazB,EAAY,IAC1ByB,EAGX,IAAII,EAAY,SAEhB,SAASC,EAAYC,EAAeC,EAAMC,EAAOC,QAC/B,IAAVD,IAAoBA,EAAQ,SACf,IAAbC,IAAuBA,EAAW,IACtC,IAAIC,EAAO,GASX,OARAA,EAAKvC,GAAQoC,EACbG,EAAKtC,GAASoC,EACdE,EAAKzC,GAAYwC,EACjBC,EAAKxC,GAAOsC,EAAMvB,IACdqB,GAAiB,mBAAsBC,IACvCG,EAAKvC,GAAQiC,EACbjB,EAAQuB,EAAKtC,GAAQL,EAAMwC,IAExBG,EAkBX,SAASC,EAAQ5B,EAAQE,EAAKI,GAE1B,SADkB,IAAdA,IAAwBA,EAAY,OAC3B,CACT,GAAc,MAAVN,EACA,OAAOA,EAEX,IAAIO,EAAML,EAAIM,QAAQF,GACtB,GAAIC,EAAM,EACN,OAAOP,EAAOE,GAElBF,EAASA,EAAOE,EAAIQ,MAAM,EAAGH,IAC7BL,EAAMA,EAAIQ,MAAMH,EAAM,IAI9B,SAASsB,EAAOC,EAAYC,EAAYC,EAAgBC,EAASC,GAE7D,QADa,IAATA,IAAmBA,EAAO,IAC1BD,EAAS,CACT,GAAIA,aAAmBE,QACnB,OAAOF,EAAQG,KAAK,SAAUC,GAAc,OAAOR,EAAOC,EAAYC,EAAYM,EAAYH,KAElG,GAAI,mBAAsBD,EACtB,OAAOA,EAAQJ,EAAQC,GAE3B,GAAI,iBAAoBG,EAAS,CAC7B,IAAIK,EAAgBR,EAAWI,GAC/B,GAAID,IAAYK,EACZ,OAEJ,IAAID,EAAatC,EAAOA,EAAO,GAAIuC,GAAgBL,GACnDF,EAAWM,EAAYH,GACvBF,MASZ,SAASO,EAAad,EAAOQ,EAASO,EAAON,GAIzC,OAHA9B,EAAQqB,EAAO9C,EAASsD,GAAWL,EAAQH,EAAO9C,IAAY,IAC9DyB,EAAQqB,EAAO7C,EAAO4D,GAASZ,EAAQH,EAAO7C,IAAU,IACxDwB,EAAQqB,EAAO3C,EAAMoD,GAAQ,IACtBT,EAcX,IAAIgB,EAAW,+BAEf,SAASC,EAAgBC,EAASnB,EAAMnB,EAAOuC,EAAUC,EAAOC,GAC5D,GAAI,iBAAoBzC,QAIpB,GAAgB,MAAZmB,EAAK,IAA0B,MAAZA,EAAK,GAAY,CACpC,IAAIuB,EAAYvB,EAAKd,MAAM,GACd,MAATL,EACAsC,EAAQK,oBAAoBD,EAAWD,GAEtB,MAAZF,GACLD,EAAQM,iBAAiBF,EAAWD,OAGvC,CACD,IAAII,EAAuB,MAAT7C,IAA2B,IAAVA,EACnC,GAAImB,KAAQmB,GACC,SAATnB,GACS,cAATA,GACS,eAATA,GACS,cAATA,IACCqB,EACGK,EACAP,EAAQQ,gBAAgB3B,GAGxBmB,EAAQnB,GAAiB,MAATnB,EAAgB,GAAKA,MAGxC,CACD,IAAI+C,GAAK,EACT,GAAIP,EAAO,CACP,IAAIQ,EAAa7B,EAEjB4B,GADA5B,EAAOA,EAAK8B,QAAQ,WAAY,OAClBD,EAElB,QAASH,EAAc,EAAI,KAAOE,EAAK,EAAI,IAAM,IAC7C,KAAK,EACDT,EAAQY,aAAa/B,EAAMnB,GAC3B,MACJ,KAAK,EACDsC,EAAQQ,gBAAgB3B,GACxB,MACJ,KAAK,EACDmB,EAAQa,eAAef,EAAUjB,EAAMnB,GACvC,MACJ,KAAK,EACDsC,EAAQc,kBAAkBhB,EAAUjB,MAuD5D,IAAIkC,EAA4B,GAIhC,SAASC,EAAQ9B,EAAQ+B,EAAUC,EAAiBf,EAAYgB,EAAcC,EAAiBnD,EAAMoD,EAAWC,EAAUpB,EAAOqB,GAC7H,IAAIC,EACAlD,EAAclB,EAAO,GAAIkE,GACzBtB,EAAUsB,EAAS3E,GAClBuD,GAA4B,QAAnBoB,EAAS7E,KACnByD,GAAQ,GAEZ,IAAIuB,EAAeH,EAAS1E,GACxB6E,IAAiBvE,GACd8C,aAAmB0B,SACnBN,EAAgBO,IAAI3B,KACvByB,EAAezE,GAEnB,IAOI4E,EAPAC,EAA2Bd,EAA0BU,GACrDK,EAAqCf,EAA0BQ,GAC/DQ,EAAYD,KACPD,GAA4BA,EAA2BC,IACzDP,GACAE,EAGHO,EAAS,KACb,OAHA1D,EAAY1B,GAAamF,GAIrB,KAAKhF,EACD6E,GAAiB,EACjB5B,EA7EZ,SAAuBhB,EAAMkB,EAAOC,EAAYgB,GAC5C,IAAIrC,EAAQE,EAAKtC,IAAU,GAC3B,GAAIsC,EAAKvC,KAAUiC,EACf,OAAOuD,SAASC,eAAejD,EAAQH,EAAOzC,IAElD,IAAI2D,GAAWE,EAAQA,GAAwB,QAAflB,EAAKvC,IAC/BwF,SAASE,gBAAgB,6BAA8BnD,EAAKvC,IAC5DwF,SAASG,cAAcpD,EAAKvC,IAClC,IAAK,IAAI4F,KAAUvD,EACfiB,EAAgBC,EAASqC,EAAQvD,EAAMuD,GAAS,KAAMnC,EAAOC,GAGjE,OADAgB,EAAamB,IAAItC,EAASlB,GACnBkB,EAiEWoC,CAAcd,EAAUpB,EAAOC,EAAYgB,GACrD,MACJ,KAAKhE,EACDqE,EA3DZ,SAAuBxC,EAAMkB,EAAOC,EAAYgB,GAC5C,IAAInB,EAAUhB,EAAKrC,GACfmC,EAAQE,EAAKtC,GACb6F,EAAYtD,EAAQD,EAAMnC,IAAe,GACzC2F,GAAU,EACd,GAAIxD,EAAKvC,KAAUiC,EAOf,OAJA8D,EAFYvD,EAAQH,EAAOzC,IACZ4C,EAAQsD,EAAWlG,MAG9B2D,EAAQyC,UAAYxD,EAAQH,EAAOzC,IAEhC,CAAC2D,EAASwC,GAErB,IAAK,IAAIH,KAAUvD,EACXA,EAAMuD,MACM,UAAXA,GAAiC,YAAXA,EACjBrC,EAAQqC,GACRE,EAAUF,MAChBtC,EAAgBC,EAASqC,EAAQvD,EAAMuD,GAASE,EAAUF,GAASnC,EAAOC,GAC1EqC,GAAU,GAIlB,OADArB,EAAamB,IAAItC,EAASlB,GACnB,CAACkB,EAASwC,GAmCJE,CAAcpB,EAAUpB,EAAOC,EAAYgB,GAAenB,EAAUwB,EAAG,GAAII,EAAiBJ,EAAG,GACpG,MACJ,KAAKxE,EACD4E,GAAiB,EACjBX,EAAS0B,KAAK,WAAc,OAAO3C,EAAQ4C,eAAiB5C,EAAQ4C,cAAcC,YAAY7C,KAC9F,MACJ,KAAK/C,EACD2E,GAAiB,EACjBtD,EAAY1B,GAAaM,EACzB8E,EAAS,CACLc,KAAM,WACF1B,EAAgBkB,IAAItC,GAAS,GAC7BR,QAAQuD,QAAQ,IAAItD,KAAKP,KAIrC0C,GAAkB5B,aAAmB0B,SACrCR,EAAgByB,KAlFxB,SAAoCK,EAAK5C,EAAW6C,QACjC,IAAXA,IAAqBA,EAAS,IAClC,IAAIC,EAAQ,IAAIC,YAAY/C,EAAW6C,GACvC,OAAO,WAAc,OAAOD,EAAII,cAAcF,IA+ErBG,CAA2BrD,EAAS+B,EAAUuB,cAAe,CAAEtB,OAAQA,KAEhG,IAAIjD,EAAWuC,EAAS/E,GAAUgH,OAAO,SAAUC,EAAKC,GACpD,IAAIC,EAAerC,EAAUoC,EAAWvD,EAAO6B,GAC/C,OAAO2B,EAAeF,EAAIG,OAAOD,GAAgBF,GAClD,IACH,OAAIzB,IAAc/E,EACP,MAEX+B,EAASP,IAAI,SAAUoF,GAAK,OAAOA,EAAE5D,UAAY6D,YAAY,SAAUC,EAAKd,GAExE,OADAhD,EAAQ+D,aAAaf,EAAKc,GACnBd,GACR,MACH1E,EAAY/B,GAAYwC,EACxBT,EAAY3B,GAAWqD,EAChB1B,GAOX,SAAS0F,EAAQtG,GACb,OAAO,MAAQA,GACR,iBAAoBA,GACpBhB,KAASgB,GACTnB,KAAYmB,GACZlB,KAAOkB,GACPjB,KAAQiB,EAGnB,SAASuG,EAAEpF,EAAMC,GAEb,IADA,IAAIoF,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAG7B,IADA,IAAIpF,EAAW,GACRmF,EAAKG,QAAQ,CAChB,IAAIrF,EAAOkF,EAAKI,MACZtF,GAAQuF,MAAMC,QAAQxF,GACtBkF,EAAOA,EAAKP,OAAO3E,GAEN,MAARA,IAAyB,IAATA,IAA0B,IAATA,GACtCD,EAAS0F,QAAQT,EAAQhF,IAASA,GAAQL,GAAY,EAAMK,IAGpE,OAAOL,GAAY,EAAOE,EAAMC,GAAS,GAAIC,GAGjD,SAAS2F,EAAgBzG,EAAMoD,EAAWtC,EAAU4F,GAChD,OAAO5F,EAASwE,OAAO,SAAUqB,EAAQnG,GAErC,OADAmG,EAAOjC,KAAKkC,MAAMD,EAAQvD,EAAU5C,EAAOkG,IACpCC,GACR,IAwCP,SAASE,EAAiB3F,EAAYC,GAClC,OAAO,SAAUnB,EAAMoD,GAAa,OAAO,SAAUrC,EAAM2F,GAAc,OAvC7E,SAAkBxF,EAAYC,EAAYnB,EAAMoD,EAAWrC,EAAM2F,GAC7D,IAAK3F,EACD,MAAO,GAEX,GAAIiF,IAAMjF,EAAKH,KACX,OAAO6F,EAAgBzG,EAAMoD,EAAWrC,EAAKzC,GAAWoI,GAE5D,IAAII,EAAW/F,EAAKtC,GAChBsI,EAAcL,GAAcA,EAAWjI,IAAU,GACjD6C,EAAON,EAAQ8F,EAAU5I,GAC7B,IAAKoD,EAAM,CACP,IAAI0F,EAAahG,EAAQ+F,EAAa7I,IAAS,GAC3C4B,EAAQkB,EAAQ8F,EAAU3I,GAC9BmD,EAAQ0F,GAAclH,EAChBkH,EAAa,IAAMlH,EAClBA,GAASkH,EAEpB,IAAIC,EAAS/F,EAAWI,GACnB2F,GAGD9F,EADA8F,EAAS9H,EAAO,GADL6B,EAAQ8F,EAAU7I,IAAS,IAEnBqD,GAEvB,IAEIT,EAAQc,EAAamF,EAFXG,EACF9H,EAAOA,EAAO,GAAI6B,EAAQ8F,EAAU9I,IAAU,IAAK0I,GAAc1F,EAAQ0F,EAAYjI,EAAQ,IAAMT,IAAU,IACtEsD,GAUnD,OATsC,mBAAdP,EAAKH,KACvBwC,EAAUrC,EAAKH,KAAKC,EAAOE,EAAKzC,IAAYyC,GAC5C,CAACA,IAAOuE,OAAO,SAAUC,EAAK2B,GAKhC,OAJInB,EAAQmB,KACRA,EAAS5I,GAAYmI,EAAgBzG,EAAMoD,EAAW8D,EAAS5I,GAAW4I,GAC1E3B,EAAIb,KAAKwC,IAEN3B,GACR,IAK6E4B,CAASjG,EAAYC,EAAYnB,EAAMoD,EAAWrC,EAAM2F,KAG5I,SAASU,EAAiBnG,EAAQC,EAAYC,GAC1C,IAtQwBF,EAAQC,EAAYgC,EAsQxCA,EAAe,IAAImE,QACnBlE,EAAkB,IAAIkE,QACtBnF,GAxQoBjB,EAwQYA,EAxQJC,EAwQYA,EAxQAgC,EAwQYA,EAvQjD,SAAU+B,GACb,IAAIlD,EAAUkD,EAAMqC,cAChBzG,EAAQqC,EAAaqE,IAAIxF,GACzBT,EAAON,EAAQH,EAAO3C,GACtB6F,EAASkB,EAAMlB,QAAU,GACzBtC,EAAaZ,EAAM,KAAOoE,EAAMuC,MAAMtG,EAAWI,GAAOyC,EAAQlD,EAAOoE,GAC3EhE,EAAOQ,EAAYH,KAkQvB,OAAO,WACH,IApFiBL,EAAQ+B,EAAUC,EAAiBf,EAAYgB,EAAcC,EAoF1EH,EAAW,GACXC,EAAkB,GACtB,MAAO,CAEH4D,EAAiB3F,EAAYC,IAxFhBF,EA0FGA,EA1FK+B,EA0FGA,EA1FOC,EA0FGA,EA1Fcf,EA0FGA,EA1FSgB,EA0FGA,EA1FWC,EA0FGA,EAzF9E,SAAUnD,EAAMoD,GAAa,OAAO,SAAUC,EAAUpB,EAAOqB,GAAoB,OAAOP,EAAQ9B,EAAQ+B,EAAUC,EAAiBf,EAAYgB,EAAcC,EAAiBnD,EAAMoD,EAAWC,EAAUpB,EAAOqB,MA2FjN,WAAc,OAAO,WACjBL,EAAgB2C,YAAY,SAAU6B,EAAG9D,GAAkB,OAAOA,KAAqB,GACvFX,EAAS4C,YAAY,SAAU6B,EAAGC,GAAW,OAAOA,KAAc,OAhKlF5E,EAA0B9D,GAAU,EACpC8D,EAA0B7D,GAAY,EACtC6D,EAA0B/D,GAAW,EAoKrC,IAAI4I,EAAqB,SAAU/G,GAAQ,OAAOnC,EAAQ,MAAQmC,GA6DlE,SAASgH,EAAUvE,EAAUwE,EAAMC,GAC/B,IAAIC,EAAYpG,EAAa0B,EAAS5E,IAQlC0I,EAAWW,EAAUvH,IAAI,SAAUoF,GAAK,OAAOA,EAAE,KAAOL,OAAO0C,EAAW,CAACC,EAPvD,WAEpB,IADA,IAAIC,EAAO,GACFhC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACpCgC,EAAKhC,GAAMC,UAAUD,GAEzB,OAAOiB,EAASP,MAAM,KAAMsB,MAEyE,GAQrGnF,EAAU+E,EAAUvH,IAAI,SAAUoF,GAAK,OAAOA,EAAE,KAAOL,OAAO0C,EAAW,CAACC,EAPvD,WAEnB,IADA,IAAIC,EAAO,GACFhC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACpCgC,EAAKhC,GAAMC,UAAUD,GAEzB,OAAOnD,EAAQ6D,MAAM,KAAMsB,MAEwE,GACnGC,EAAYL,EAAUvH,IAAI,SAAUoF,GAAK,OAAOA,EAAE,KAAOL,OAAO0C,EAAW,CAACC,EAAMA,IAAO,GAEzFlH,EA/ER,SAASqH,EAAchI,EAAOiD,GAC1B,IAAKA,EACD,OAAOlD,EAAeC,GAE1B,IAAKA,EAOD,OANAZ,EAAQ6D,EAAUzE,EAAYyE,EAAS5E,IACvC4E,EAAS1E,GAAc0E,EAAS1E,KAAeM,GAAYoE,EAAS1E,KAAeI,EAC7EsE,EAAS1E,GACRqC,EAAQqC,EAAUsE,EAAmB3I,IAClCA,EACAD,EACHsE,EAEX7D,EAAQ6D,EAAUzE,EAAYyE,EAAS5E,IACvC4E,EAAS5E,GAAS2B,EAAM3B,GACxB4E,EAAS9E,GAAO6B,EAAM7B,GACtB8E,EAAS7E,GAAQ4B,EAAM5B,GACvB6E,EAAS1E,GAAaO,EACtB,IAAImJ,EAAsBhF,EAAS/E,GAAUiC,IAAI,SAAUC,EAAOF,GAAK,OAAQE,EAAMF,EAAIA,EAAGE,IACxFM,EAAWV,EAAM9B,GAAUiC,IAAI,SAAUC,GACzC,IAAI8H,EAAWC,EAAYjI,EAC3B,IAAKA,EAAI,EAAGA,EAAI+H,EAAoBjC,OAAQ9F,IAExC,GADAiI,EAAaF,EAAoB/H,GAC7BE,EAAMhC,IAAS+J,EAAW/J,IACvBgC,EAAMjC,IAAQgK,EAAWhK,KACxBW,IAAWqJ,EAAW5J,IAAcG,IAAWyJ,EAAW5J,IAAa,CAC3E2J,EAAYC,EACZ,MAGR,OAAID,GACAD,EAAoBG,OAAOlI,EAAG,GACvB8H,EAAc5H,EAAO8H,IAGrBF,EAAc5H,KAqB7B,OAlBA6H,EAAoB9H,IAAI,SAAUC,GAE9B,GAAI,KADJA,EAAQ4H,OAAcK,EAAWjI,IACjBF,EACZQ,EAAS0F,QAAQhG,OAEhB,CACD,IAAIkI,EAAQlI,EAAMF,EAAI,EAClBA,OAAI,EACR,IAAKA,EAAI,EAAGA,EAAIQ,EAASsF,OAAQ9F,IAC7B,GAAIoI,IAAU5H,EAASR,GAAGA,EAEtB,YADAQ,EAAS0H,OAAOlI,EAAI,EAAG,EAAGE,GAIlCM,EAAS4D,KAAKlE,MAGtB6C,EAAS/E,GAAYwC,EACduC,EAuBI+E,CADCjB,EAASnB,EAAE6B,EAAME,EAAW,KAAK,GACb1E,GAGhC,OAFAA,EAAWN,EAAQhC,EAAM,QAAUA,EAAKH,KAAM,IAC9CuH,IACO9E,EAEX,SAAS2E,EAAUzE,EAAIoF,GACnB,IAAI3I,EAAOuD,EAAG,GAAIH,EAAYG,EAAG,GACjC,MAAO,CAACoF,EAAQA,EAAM3I,EAAMoD,GAAapD,EAAMoD,GAEnD,SAAS6E,KA8CT,IAAIW,EAAW,IAAIvB,QAYnB5J,EAAQoL,KAxDR,SAAchB,EAAMiB,EAAmBC,QACnB,IAAZA,IAAsBA,EAAU,IACpC,IAtb6BhH,EACzBhB,EAkDgBG,EAAYC,EAAYC,EAmYxC4H,GAAY,EACZ3F,EAAWyF,aAA6BrF,UAtbxC1C,EAAOZ,EAAeO,GAAY,GADTqB,EAwbC+G,GAvbuBG,YAChDvK,GAAWqD,EACThB,GAsbD+H,EAEFI,EAAclI,EADFW,EAAa0B,EAAS5E,IACDV,GACjCoL,EAAc9K,KAAe0K,GAAWA,EAAQ1K,IAAgB,GAChE4C,GA1YgBC,EA0YQA,EA1YIC,EA0YQA,EA1YIC,EAoa5C,WACS4H,IACDA,GAAY,EACZzH,QAAQuD,UAAUtD,KAAK4H,GAAQ5H,KAAK6H,EAAUC,KAta/C,SAAUjI,EAASC,GAAQ,OAAOL,EAAOC,EAAYC,EAAYC,EAAgBC,EAASC,KA0Y7FiI,EAAoB,CAACnC,GACpB1B,OAAOyD,GACP5I,IAAI,SAAUiJ,GAAY,OAAOA,EAASvI,EAAQC,EAAYC,EAAY0G,EAAMxE,KACrF,SAASnC,EAAWI,EAAMmI,GAEtB,YADY,IAARA,IAAkBA,EAAM,KACpBnI,EAAON,EAAQkI,EAAa5H,GAAQ4H,IAAgBO,EAEhE,SAAStI,EAAWM,EAAYH,GACxBA,EACA9B,EAAQ0J,EAAa5H,EAAMG,GAG3ByH,EAAczH,EAGtB,SAAS2H,IACL/F,EAAWuE,EAAUvE,EAAUwE,EAAM0B,EAAkBhJ,IAAI,SAAUiJ,GAAY,OAAOA,OAE5F,SAASH,IACLL,GAAY,EAEhB,SAASM,EAAcI,GAEnB,MADAL,IACMK,EAQV,OAAOzI,GAgBXxD,EAAQkM,wBAZR,SAAiCC,GAQ7B,OAPKhB,EAASlF,IAAIkG,IACdhB,EAASvE,IAAIuF,EAAc,SAAUvI,EAASR,EAAOoE,GACjD,GAAIA,EAAMqC,gBAAkBrC,EAAM7F,OAC9B,OAAOwK,EAAavI,EAASR,EAAOoE,KAIzC2D,EAASrB,IAAIqC,IAKxBnM,EAAQuI,EAAIA","sourcesContent":["/*\nxatto v1.0.0-rc.3\nhttps://github.com/atomita/xatto\nReleased under the MIT License.\n*/\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.xatto = {})));\n}(this, (function (exports) { 'use strict';\n\n  var CONTEXT = 'xa.context';\r\n  var EXTRA = 'xa.extra';\r\n  var FILL = 'xa.fill';\r\n  var PATH = 'xa.path';\r\n  var SLICE = 'xa.slice';\r\n  var TEXT = 'xa.text';\n\n  var MIDDLEWARES = 'middlewares';\n\n  var CHILDREN = 'children';\r\n  var KEY = 'key';\r\n  var NAME = 'name';\r\n  var PROPS = 'props';\n\n  var ELEMENT = 'element';\r\n  var LIFECYCLE = 'lifecycle';\r\n  var PREV = 'prev';\r\n  var PREV_PROPS = PREV + \".\" + PROPS;\n\n  var CREATE = 'create';\r\n  var DESTROY = 'destroy';\r\n  var REMOVE = 'remove';\r\n  var REMOVING = 'removing';\r\n  var UPDATE = 'update';\n\n  function assign(target, source) {\r\n      for (var key in source) {\r\n          if (source.hasOwnProperty(key)) {\r\n              target[key] = source[key];\r\n          }\r\n      }\r\n      return target;\r\n  }\n\n  /**\r\n   * Set an object item to a given value using separator notation.\r\n   *\r\n   * @param {any} target\r\n   * @param {string} key\r\n   * @param {any} value\r\n   * @param {string} separator\r\n   * @return {boolean}\r\n   */\r\n  function deepSet(target, key, value, separator) {\r\n      if (separator === void 0) { separator = '.'; }\r\n      while (true) {\r\n          if ('object' !== typeof target) {\r\n              return false;\r\n          }\r\n          var idx = key.indexOf(separator);\r\n          if (idx < 0) {\r\n              target[key] = value;\r\n              return true;\r\n          }\r\n          var current = key.slice(0, idx);\r\n          var nexts = key.slice(idx + 1);\r\n          if (null == target[current]) {\r\n              var next = nexts.split(separator, 1)[0];\r\n              target[current] = next === \"\" + parseInt(next, 10) ? [] : {};\r\n          }\r\n          target = target[current];\r\n          key = nexts;\r\n      }\r\n  }\n\n  function createGlueNode(vNode) {\r\n      var newGlueNode = assign({}, vNode);\r\n      newGlueNode.i = 0;\r\n      newGlueNode[LIFECYCLE] = CREATE;\r\n      newGlueNode[CHILDREN] = vNode[CHILDREN].map(function (child) { return createGlueNode(child); });\r\n      deepSet(newGlueNode, PREV_PROPS, {});\r\n      return newGlueNode;\r\n  }\n\n  var TEXT_NODE = 'xa-txt';\n\n  function createVNode(mayBeTextNode, name, props, children) {\r\n      if (props === void 0) { props = {}; }\r\n      if (children === void 0) { children = []; }\r\n      var node = {};\r\n      node[NAME] = name;\r\n      node[PROPS] = props;\r\n      node[CHILDREN] = children;\r\n      node[KEY] = props.key;\r\n      if (mayBeTextNode && 'function' !== typeof name) {\r\n          node[NAME] = TEXT_NODE;\r\n          deepSet(node[PROPS], TEXT, name);\r\n      }\r\n      return node;\r\n  }\n\n  function createGlueNodeByElement(element) {\r\n      var node = createGlueNode(createVNode(false, element.nodeName));\r\n      node[ELEMENT] = element;\r\n      return node;\r\n  }\n\n  /**\r\n   * Get an item from an object using separator notation.\r\n   *\r\n   * @typeparam {T}\r\n   * @param {any} target\r\n   * @param {string} key\r\n   * @param {string} separator\r\n   * @return {T}\r\n   */\r\n  function deepGet(target, key, separator) {\r\n      if (separator === void 0) { separator = '.'; }\r\n      while (true) {\r\n          if (target == null) {\r\n              return target;\r\n          }\r\n          var idx = key.indexOf(separator);\r\n          if (idx < 0) {\r\n              return target[key];\r\n          }\r\n          target = target[key.slice(0, idx)];\r\n          key = key.slice(idx + 1);\r\n      }\r\n  }\n\n  function mutate(getContext, setContext, scheduleRender, context, path) {\r\n      if (path === void 0) { path = ''; }\r\n      if (context) {\r\n          if (context instanceof Promise) {\r\n              return context.then(function (newContext) { return mutate(getContext, setContext, newContext, path); });\r\n          }\r\n          if ('function' === typeof context) {\r\n              return context(mutate, getContext);\r\n          }\r\n          if ('object' === typeof context) {\r\n              var targetContext = getContext(path);\r\n              if (context === targetContext) {\r\n                  return;\r\n              }\r\n              var newContext = assign(assign({}, targetContext), context);\r\n              setContext(newContext, path);\r\n              scheduleRender();\r\n          }\r\n      }\r\n  }\n\n  function mutateProvider(getContext, setContext, scheduleRender) {\r\n      return function (context, path) { return mutate(getContext, setContext, scheduleRender, context, path); };\r\n  }\n\n  function remodelProps(props, context, extra, path) {\r\n      deepSet(props, CONTEXT, context || deepGet(props, CONTEXT) || {});\r\n      deepSet(props, EXTRA, extra || deepGet(props, EXTRA) || {});\r\n      deepSet(props, PATH, path || '');\r\n      return props;\r\n  }\n\n  function eventProxyProvider(mutate, getContext, elementProps) {\r\n      return function (event) {\r\n          var element = event.currentTarget;\r\n          var props = elementProps.get(element);\r\n          var path = deepGet(props, PATH);\r\n          var detail = event.detail || {};\r\n          var newContext = props[\"on\" + event.type](getContext(path), detail, props, event);\r\n          mutate(newContext, path);\r\n      };\r\n  }\n\n  var XLINK_NS = \"http://www.w3.org/1999/xlink\";\n\n  function updateAttribute(element, name, value, oldValue, isSVG, eventProxy) {\r\n      if ('object' === typeof value) {\r\n          // noop\r\n      }\r\n      else {\r\n          if (name[0] === \"o\" && name[1] === \"n\") {\r\n              var eventName = name.slice(2);\r\n              if (value == null) {\r\n                  element.removeEventListener(eventName, eventProxy);\r\n              }\r\n              else if (oldValue == null) {\r\n                  element.addEventListener(eventName, eventProxy);\r\n              }\r\n          }\r\n          else {\r\n              var nullOrFalse = value == null || value === false;\r\n              if (name in element &&\r\n                  name !== \"list\" &&\r\n                  name !== \"draggable\" &&\r\n                  name !== \"spellcheck\" &&\r\n                  name !== \"translate\" &&\r\n                  !isSVG) {\r\n                  if (nullOrFalse) {\r\n                      element.removeAttribute(name);\r\n                  }\r\n                  else {\r\n                      element[name] = value == null ? \"\" : value;\r\n                  }\r\n              }\r\n              else {\r\n                  var ns = false;\r\n                  if (isSVG) {\r\n                      var originName = name;\r\n                      name = name.replace(/^xlink:?/, \"\");\r\n                      ns = name !== originName;\r\n                  }\r\n                  switch ((nullOrFalse ? 1 : 0) + ((ns ? 1 : 0) << 1)) {\r\n                      case 0:\r\n                          element.setAttribute(name, value);\r\n                          break;\r\n                      case 1:\r\n                          element.removeAttribute(name);\r\n                          break;\r\n                      case 2:\r\n                          element.setAttributeNS(XLINK_NS, name, value);\r\n                          break;\r\n                      case 3:\r\n                          element.removeAttributeNS(XLINK_NS, name);\r\n                  }\r\n              }\r\n          }\r\n      }\r\n  }\n\n  function createElement(node, isSVG, eventProxy, elementProps) {\r\n      var props = node[PROPS] || {};\r\n      if (node[NAME] === TEXT_NODE) {\r\n          return document.createTextNode(deepGet(props, TEXT));\r\n      }\r\n      var element = (isSVG = isSVG || node[NAME] === \"svg\")\r\n          ? document.createElementNS(\"http://www.w3.org/2000/svg\", node[NAME])\r\n          : document.createElement(node[NAME]);\r\n      for (var name_1 in props) {\r\n          updateAttribute(element, name_1, props[name_1], null, isSVG, eventProxy);\r\n      }\r\n      elementProps.set(element, props);\r\n      return element;\r\n  }\n\n  function fireLifeCycleEventProvider(elm, eventName, option) {\r\n      if (option === void 0) { option = {}; }\r\n      var event = new CustomEvent(eventName, option);\r\n      return function () { return elm.dispatchEvent(event); };\r\n  }\n\n  function updateElement(node, isSVG, eventProxy, elementProps) {\r\n      var element = node[ELEMENT];\r\n      var props = node[PROPS];\r\n      var prevProps = deepGet(node, PREV_PROPS) || {};\r\n      var updated = false;\r\n      if (node[NAME] === TEXT_NODE) {\r\n          var value = deepGet(props, TEXT);\r\n          var oldValue = deepGet(prevProps, TEXT);\r\n          updated = value != oldValue;\r\n          if (updated) {\r\n              element.nodeValue = deepGet(props, TEXT);\r\n          }\r\n          return [element, updated];\r\n      }\r\n      for (var name_1 in props) {\r\n          if (props[name_1] !==\r\n              (name_1 === \"value\" || name_1 === \"checked\"\r\n                  ? element[name_1]\r\n                  : prevProps[name_1])) {\r\n              updateAttribute(element, name_1, props[name_1], prevProps[name_1], isSVG, eventProxy);\r\n              updated = true;\r\n          }\r\n      }\r\n      elementProps.set(element, props);\r\n      return [element, updated];\r\n  }\n\n  var shouldBeCaptureLifecycles = {};\r\n  shouldBeCaptureLifecycles[REMOVE] = 1;\r\n  shouldBeCaptureLifecycles[REMOVING] = 2;\r\n  shouldBeCaptureLifecycles[DESTROY] = 3;\r\n  function patcher(mutate, destroys, lifecycleEvents, eventProxy, elementProps, elementRemoveds, next, recursion, glueNode, isSVG, captureLifecycle) {\r\n      var _a;\r\n      var newGlueNode = assign({}, glueNode);\r\n      var element = glueNode[ELEMENT];\r\n      if (!isSVG && glueNode[NAME] === 'svg') {\r\n          isSVG = true;\r\n      }\r\n      var rawLifecycle = glueNode[LIFECYCLE];\r\n      if (rawLifecycle === REMOVING\r\n          && element instanceof Element\r\n          && elementRemoveds.has(element)) {\r\n          rawLifecycle = DESTROY;\r\n      }\r\n      var shouldBeCaptureLifecycle = shouldBeCaptureLifecycles[rawLifecycle];\r\n      var shouldBeCaptureLifecycleByCaptured = shouldBeCaptureLifecycles[captureLifecycle];\r\n      var lifecycle = shouldBeCaptureLifecycleByCaptured\r\n          && (!shouldBeCaptureLifecycle || shouldBeCaptureLifecycle < shouldBeCaptureLifecycleByCaptured)\r\n          && captureLifecycle\r\n          || rawLifecycle;\r\n      newGlueNode[LIFECYCLE] = lifecycle;\r\n      var lifecycleEvent;\r\n      var detail = null;\r\n      switch (lifecycle) {\r\n          case CREATE:\r\n              lifecycleEvent = true;\r\n              element = createElement(glueNode, isSVG, eventProxy, elementProps);\r\n              break;\r\n          case UPDATE:\r\n              _a = updateElement(glueNode, isSVG, eventProxy, elementProps), element = _a[0], lifecycleEvent = _a[1];\r\n              break;\r\n          case DESTROY:\r\n              lifecycleEvent = true;\r\n              destroys.push(function () { return element.parentElement && element.parentElement.removeChild(element); });\r\n              break;\r\n          case REMOVE:\r\n              lifecycleEvent = true;\r\n              newGlueNode[LIFECYCLE] = REMOVING;\r\n              detail = {\r\n                  done: function () {\r\n                      elementRemoveds.set(element, true);\r\n                      Promise.resolve({}).then(mutate);\r\n                  }\r\n              };\r\n      }\r\n      if (lifecycleEvent && element instanceof Element) {\r\n          lifecycleEvents.push(fireLifeCycleEventProvider(element, lifecycle.toLowerCase(), { detail: detail }));\r\n      }\r\n      var children = glueNode[CHILDREN].reduce(function (acc, childNode) {\r\n          var patchedChild = recursion(childNode, isSVG, lifecycle);\r\n          return patchedChild ? acc.concat(patchedChild) : acc;\r\n      }, []);\r\n      if (lifecycle === DESTROY) {\r\n          return null;\r\n      }\r\n      children.map(function (v) { return v.element; }).reduceRight(function (ref, elm) {\r\n          element.insertBefore(elm, ref);\r\n          return elm;\r\n      }, null);\r\n      newGlueNode[CHILDREN] = children;\r\n      newGlueNode[ELEMENT] = element;\r\n      return newGlueNode;\r\n  }\n\n  function patcherProvider(mutate, destroys, lifecycleEvents, eventProxy, elementProps, elementRemoveds) {\r\n      return function (next, recursion) { return function (glueNode, isSVG, captureLifecycle) { return patcher(mutate, destroys, lifecycleEvents, eventProxy, elementProps, elementRemoveds, next, recursion, glueNode, isSVG, captureLifecycle); }; };\r\n  }\n\n  function isVNode(value) {\r\n      return null != value\r\n          && 'object' === typeof value\r\n          && PROPS in value\r\n          && CHILDREN in value\r\n          && KEY in value\r\n          && NAME in value;\r\n  }\n\n  function x(name, props) {\r\n      var rest = [];\r\n      for (var _i = 2; _i < arguments.length; _i++) {\r\n          rest[_i - 2] = arguments[_i];\r\n      }\r\n      var children = [];\r\n      while (rest.length) {\r\n          var node = rest.pop();\r\n          if (node && Array.isArray(node)) {\r\n              rest = rest.concat(node);\r\n          }\r\n          else if (node != null && node !== true && node !== false) {\r\n              children.unshift(isVNode(node) && node || createVNode(true, node));\r\n          }\r\n      }\r\n      return createVNode(false, name, props || {}, children);\r\n  }\n\n  function resolveChildren(next, recursion, children, parentNode) {\r\n      return children.reduce(function (childs, child) {\r\n          childs.push.apply(childs, recursion(child, parentNode));\r\n          return childs;\r\n      }, []);\r\n  }\r\n  function resolver(getContext, setContext, next, recursion, node, parentNode) {\r\n      if (!node) {\r\n          return [];\r\n      }\r\n      if (x === node.name) { // Fragment\r\n          return resolveChildren(next, recursion, node[CHILDREN], parentNode);\r\n      }\r\n      var rawProps = node[PROPS];\r\n      var parentProps = parentNode && parentNode[PROPS] || {};\r\n      var path = deepGet(rawProps, PATH);\r\n      if (!path) {\r\n          var parentPath = deepGet(parentProps, PATH) || '';\r\n          var slice = deepGet(rawProps, SLICE);\r\n          path = (parentPath && slice)\r\n              ? parentPath + \".\" + slice\r\n              : (slice || parentPath);\r\n      }\r\n      var sliced = getContext(path);\r\n      if (!sliced) {\r\n          var fill = deepGet(rawProps, FILL) || {};\r\n          sliced = assign({}, fill);\r\n          setContext(sliced, path);\r\n      }\r\n      var context = sliced;\r\n      var extra = assign(assign({}, deepGet(rawProps, EXTRA) || {}), parentNode && deepGet(parentNode, PROPS + \".\" + EXTRA) || {});\r\n      var props = remodelProps(rawProps, context, extra, path);\r\n      var resolveds = (typeof node.name === \"function\"\r\n          ? recursion(node.name(props, node[CHILDREN]), node)\r\n          : [node]).reduce(function (acc, resolved) {\r\n          if (isVNode(resolved)) {\r\n              resolved[CHILDREN] = resolveChildren(next, recursion, resolved[CHILDREN], resolved);\r\n              acc.push(resolved);\r\n          }\r\n          return acc;\r\n      }, []);\r\n      return resolveds;\r\n  }\n\n  function resolverProvider(getContext, setContext) {\r\n      return function (next, recursion) { return function (node, parentNode) { return resolver(getContext, setContext, next, recursion, node, parentNode); }; };\r\n  }\n\n  function rendererProvider(mutate, getContext, setContext /*, view, glueNode */) {\r\n      var elementProps = new WeakMap();\r\n      var elementRemoveds = new WeakMap();\r\n      var eventProxy = eventProxyProvider(mutate, getContext, elementProps);\r\n      return function () {\r\n          var destroys = [];\r\n          var lifecycleEvents = [];\r\n          return [\r\n              // resolver\r\n              resolverProvider(getContext, setContext),\r\n              // pather\r\n              patcherProvider(mutate, destroys, lifecycleEvents, eventProxy, elementProps, elementRemoveds),\r\n              // finallyer\r\n              function () { return function () {\r\n                  lifecycleEvents.reduceRight(function (_, lifecycleEvent) { return lifecycleEvent(); }, 0);\r\n                  destroys.reduceRight(function (_, destroy) { return destroy(); }, 0);\r\n              }; },\r\n          ];\r\n      };\r\n  }\n\n  var lifeCycleEventPath = function (name) { return PROPS + \".on\" + name; };\n\n  function mergeGlueNode(vNode, glueNode) {\r\n      if (!glueNode) {\r\n          return createGlueNode(vNode);\r\n      }\r\n      if (!vNode) {\r\n          deepSet(glueNode, PREV_PROPS, glueNode[PROPS]);\r\n          glueNode[LIFECYCLE] = (glueNode[LIFECYCLE] === REMOVING || glueNode[LIFECYCLE] === DESTROY)\r\n              ? glueNode[LIFECYCLE]\r\n              : (deepGet(glueNode, lifeCycleEventPath(REMOVE))\r\n                  ? REMOVE\r\n                  : DESTROY);\r\n          return glueNode;\r\n      }\r\n      deepSet(glueNode, PREV_PROPS, glueNode[PROPS]);\r\n      glueNode[PROPS] = vNode[PROPS];\r\n      glueNode[KEY] = vNode[KEY];\r\n      glueNode[NAME] = vNode[NAME];\r\n      glueNode[LIFECYCLE] = UPDATE;\r\n      var indexedPrevChildren = glueNode[CHILDREN].map(function (child, i) { return (child.i = i, child); });\r\n      var children = vNode[CHILDREN].map(function (child) {\r\n          var prevChild, _prevChild, i;\r\n          for (i = 0; i < indexedPrevChildren.length; i++) {\r\n              _prevChild = indexedPrevChildren[i];\r\n              if (child[NAME] == _prevChild[NAME]\r\n                  && child[KEY] == _prevChild[KEY]\r\n                  && (UPDATE === _prevChild[LIFECYCLE] || CREATE === _prevChild[LIFECYCLE])) {\r\n                  prevChild = _prevChild;\r\n                  break;\r\n              }\r\n          }\r\n          if (prevChild) {\r\n              indexedPrevChildren.splice(i, 1);\r\n              return mergeGlueNode(child, prevChild);\r\n          }\r\n          else {\r\n              return mergeGlueNode(child);\r\n          }\r\n      });\r\n      indexedPrevChildren.map(function (child) {\r\n          child = mergeGlueNode(undefined, child);\r\n          if (0 === child.i) {\r\n              children.unshift(child);\r\n          }\r\n          else {\r\n              var index = child.i - 1;\r\n              var i = void 0;\r\n              for (i = 0; i < children.length; i++) {\r\n                  if (index === children[i].i) {\r\n                      children.splice(i + 1, 0, child);\r\n                      return;\r\n                  }\r\n              }\r\n              children.push(child);\r\n          }\r\n      });\r\n      glueNode[CHILDREN] = children;\r\n      return glueNode;\r\n  }\n\n  function rendering(glueNode, view, renderers) {\r\n      var rootProps = remodelProps(glueNode[PROPS]);\r\n      var resolverRecursion = function () {\r\n          var args = [];\r\n          for (var _i = 0; _i < arguments.length; _i++) {\r\n              args[_i] = arguments[_i];\r\n          }\r\n          return resolver.apply(null, args);\r\n      };\r\n      var resolver = renderers.map(function (v) { return v[0]; }).reduce(wrapOnion, [noop, resolverRecursion])[0];\r\n      var patcherRecursion = function () {\r\n          var args = [];\r\n          for (var _i = 0; _i < arguments.length; _i++) {\r\n              args[_i] = arguments[_i];\r\n          }\r\n          return patcher.apply(null, args);\r\n      };\r\n      var patcher = renderers.map(function (v) { return v[1]; }).reduce(wrapOnion, [noop, patcherRecursion])[0];\r\n      var finallyer = renderers.map(function (v) { return v[2]; }).reduce(wrapOnion, [noop, noop])[0];\r\n      var vNode = resolver(x(view, rootProps, []))[0];\r\n      var node = mergeGlueNode(vNode, glueNode);\r\n      glueNode = patcher(node, 'svg' === node.name, '');\r\n      finallyer();\r\n      return glueNode;\r\n  }\r\n  function wrapOnion(_a, stack) {\r\n      var next = _a[0], recursion = _a[1];\r\n      return [stack ? stack(next, recursion) : next, recursion];\r\n  }\r\n  function noop() { }\n\n  function atto(view, elementOrGlueNode, options) {\r\n      if (options === void 0) { options = {}; }\r\n      var scheduled = false;\r\n      var glueNode = elementOrGlueNode instanceof Element\r\n          ? createGlueNodeByElement(elementOrGlueNode)\r\n          : elementOrGlueNode;\r\n      var rootProps = remodelProps(glueNode[PROPS]);\r\n      var rootContext = deepGet(rootProps, CONTEXT);\r\n      var middlewares = MIDDLEWARES in options && options[MIDDLEWARES] || [];\r\n      var mutate = mutateProvider(getContext, setContext, scheduleRender);\r\n      var rendererProviders = [rendererProvider]\r\n          .concat(middlewares)\r\n          .map(function (provider) { return provider(mutate, getContext, setContext, view, glueNode); });\r\n      function getContext(path, def) {\r\n          if (def === void 0) { def = {}; }\r\n          return (path ? deepGet(rootContext, path) : rootContext) || def;\r\n      }\r\n      function setContext(newContext, path) {\r\n          if (path) {\r\n              deepSet(rootContext, path, newContext);\r\n          }\r\n          else {\r\n              rootContext = newContext;\r\n          }\r\n      }\r\n      function render() {\r\n          glueNode = rendering(glueNode, view, rendererProviders.map(function (provider) { return provider(); }));\r\n      }\r\n      function rendered() {\r\n          scheduled = false;\r\n      }\r\n      function renderedError(e) {\r\n          rendered();\r\n          throw e;\r\n      }\r\n      function scheduleRender() {\r\n          if (!scheduled) {\r\n              scheduled = true;\r\n              Promise.resolve().then(render).then(rendered, renderedError);\r\n          }\r\n      }\r\n      return mutate;\r\n  }\n\n  var memorize = new WeakMap();\r\n  function currentOnlyEventHandler(eventHandler) {\r\n      if (!memorize.has(eventHandler)) {\r\n          memorize.set(eventHandler, function (context, props, event) {\r\n              if (event.currentTarget === event.target) {\r\n                  return eventHandler(context, props, event);\r\n              }\r\n          });\r\n      }\r\n      return memorize.get(eventHandler);\r\n  }\n\n  exports.atto = atto;\n  exports.currentOnlyEventHandler = currentOnlyEventHandler;\n  exports.x = x;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"]}